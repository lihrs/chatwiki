import{a3 as w,b as m,k as i,N as b,O as u,j as y,U as d,F as R,a1 as S,S as h,Z as N,_ as v,u as B,a7 as k,e as V,a6 as j,X as p,a8 as K,a2 as L}from"./vue-chunks-BRsu9_To.js";import{u as g}from"./robot-BV-Npy-c.js";import{b as I,d as c,aA as q}from"../../index-DDbybdOX.js";import{_ as E,M as F}from"./index-CEgtvWQl.js";import"./index-B__xim_5.js";import"./axios-Dq7h7Pqt.js";import"./qs-BrxkIg-9.js";import"./crypto-js-ClNpte_9.js";import"./dayjs-B6IotFah.js";import"./shallowequal-C0xnIuy8.js";import"./Trigger-D5Y4uzl5.js";import"./ResizeObserver.es-B1PUzC5B.js";import"./collapseMotion-Brd6xpAT.js";import"./slide-B4hiqfwi.js";import"./index-BN8NtH5x.js";import"./index-QtALLQFU.js";import"./colors-BxVN-WHk.js";const O={class:"left-menu-box"},P={__name:"left-menu",props:{robotInfo:{type:Object,default:()=>{}}},emits:["changeMenu"],setup(o,{emit:f}){const t=w(),n=o,l=t.query,e=m(()=>[t.path.split("/")[3]]),r=[{key:"workflow",id:"workflow",icon:()=>i(c,{name:"workflow",class:"menu-icon"}),label:"工作流编排",title:"工作流编排",path:"/robot/config/workflow"},{key:"basic-config",id:"basic-config",icon:()=>i(c,{name:"jichupeizhi",class:"menu-icon"}),label:"基础配置",title:"基础配置",path:"/robot/config/basic-config"},{key:"external-services",id:"external-services",icon:()=>i(c,{name:"duiwaifuwu",class:"menu-icon"}),label:"对外服务",title:"对外服务",path:"/robot/config/external-services"},{key:"test",id:"test",icon:()=>i(c,{name:"liaotianceshi",class:"menu-icon"}),label:"聊天测试",title:"聊天测试",path:"/robot/test",query:{robot_key:n.robotInfo.robot_key,id:n.robotInfo.id},target:"_blank"},{key:"qa-feedbacks",id:"qa-feedbacks",icon:()=>i(c,{name:"qa-feedback",class:"menu-icon"}),label:"问答反馈",title:"问答反馈",path:"/robot/config/qa-feedbacks"},{key:"session-record",id:"session-record",icon:()=>i(c,{name:"session-record",class:"menu-icon"}),label:"会话记录",title:"会话记录",path:"/robot/config/session-record",query:{robot_key:n.robotInfo.robot_key,id:n.robotInfo.id}},{key:"statistical_analysis",id:"statistical_analysis",icon:()=>i(c,{name:"statistical-analysis",class:"menu-icon"}),label:"统计分析",title:"统计分析",path:"/robot/config/statistical_analysis"},{key:"export-record",id:"export-record",icon:()=>i(c,{name:"export-record",class:"menu-icon"}),label:"导出记录",title:"导出记录",path:"/robot/config/export-record"}],_=m(()=>q(l.id)==1?r.filter(a=>a.id=="external-services"):n.robotInfo.application_type==0?r.filter(a=>a.id!="workflow"):r.filter(a=>a.id!="basic-config")),M=({item:a})=>{e.value.includes(a.id)};return(a,H)=>{const $=E,C=k("router-link"),x=F;return u(),b("div",O,[y(x,{class:"left-menu",selectedKeys:e.value,onClick:M},{default:d(()=>[(u(!0),b(R,null,S(_.value,s=>(u(),h(C,{class:"default-color",tag:"a",target:s.target||"_self",to:{path:s.path,query:s.query||B(l)},key:s.key},{default:d(()=>[(u(),h($,{icon:s.icon,path:s.path,key:s.key},{default:d(()=>[N(v(s.label),1)]),_:2},1032,["icon","path"]))]),_:2},1032,["target","to"]))),128))]),_:1},8,["selectedKeys"])])}}},T=I(P,[["__scopeId","data-v-89bf9e13"]]),W=V({name:"robotPage",components:{leftMenu:T},async beforeRouteEnter(o,f,t){const n=g(),{getRobot:l,robotInfo:e}=n;await l(o.query.id);let r=q(o.query.id);if(r==0){t("/no-permission");return}if(r==1){window.location.href=`${e.h5_domain}/#/chat/pc?robot_key=${e.robot_key}`,t("/robot/list");return}if(e.application_type==1&&o.name=="basicConfig"){t(`/robot/config/workflow?id=${e.id}&robot_key=${e.robot_key}`);return}if(e.application_type==0&&o.name=="robotWorkflow"){t(`/robot/config/basic-config?id=${e.id}&robot_key=${e.robot_key}`);return}t()},setup(){const o=L(),f=g(),{robotInfo:t}=K(f),n=m(()=>w().name!="robotWorkflow");return{robotInfo:t,changeMenu:e=>{o.push({path:e.path,query:{robot_key:t.value.robot_key,id:t.value.id}})},isShowLeft:n}}}),z={class:"robot-page-layout"},A={key:0,class:"layout-left"},D={class:"robot-name-box"},U=["src"],X={class:"robot-name"},Z={class:"layout-body"};function G(o,f,t,n,l,e){const r=k("leftMenu"),_=k("router-view");return u(),b("div",z,[o.isShowLeft?(u(),b("div",A,[p("div",D,[p("img",{class:"robot-avatar",src:o.robotInfo.robot_avatar_url,alt:""},null,8,U),p("span",X,v(o.robotInfo.robot_name),1)]),y(r,{onChangeMenu:o.changeMenu,robotInfo:o.robotInfo},null,8,["onChangeMenu","robotInfo"])])):j("",!0),p("div",Z,[y(_)])])}const _o=I(W,[["render",G],["__scopeId","data-v-242bbf62"]]);export{_o as default};
