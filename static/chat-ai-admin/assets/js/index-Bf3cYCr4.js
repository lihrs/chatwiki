import{I as x,b as C,l as W,f as j,ai as z,aj as D,k as _,ak as L,al as P}from"../../index-DDbybdOX.js";import{j as p,d,N as v,a6 as V,X as o,u as w,a5 as B,_ as F,O as g}from"./vue-chunks-BRsu9_To.js";import{_ as N}from"./index-C28wIIco.js";import"./axios-Dq7h7Pqt.js";import"./qs-BrxkIg-9.js";import"./crypto-js-ClNpte_9.js";import"./dayjs-B6IotFah.js";import"./FormItemContext-TDgu36NB.js";var I={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M523.8 191.4v288.9h382V128.1zm0 642.2l382 62.2v-352h-382zM120.1 480.2H443V201.9l-322.9 53.5zm0 290.4L443 823.2V543.8H120.1z"}}]},name:"windows",theme:"filled"};function h(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},l=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(l=l.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),l.forEach(function(i){q(a,i,t[i])})}return a}function q(a,e,t){return e in a?Object.defineProperty(a,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[e]=t,a}var m=function(e,t){var l=h({},e,t.attrs);return p(x,h({},l,{icon:I}),null)};m.displayName="WindowsFilled";m.inheritAttrs=!1;const E="/assets/img/client-download-pic-D_c9zEa_.png",T={class:"client-download-page"},A={key:0,class:"login-required-switch"},H={class:"page-body"},M={class:"app-info"},R={class:"banner"},U={__name:"index",setup(a){const e=W();let{role_type:t}=e;const{t:l}=j(),i=d(!1),b=()=>{P({client_side_login_switch:i.value?1:0}).then(()=>{_.success(l("common.saveSuccess"))})},S=d(""),c=d("Windows下载"),r=d(!1);let u=null;const f=()=>L({domain:""}).then(s=>(s.data.file_url?(r.value=!1,c.value="Windows下载",S.value=s.data.file_url,clearTimeout(u),u=null):(c.value="打包中...",r.value=!0,u=setTimeout(()=>{f()},5e3)),s)),k=()=>{r.value||f().then(s=>{s.data.file_url?D("",s.data.file_url):_.error("下载文件还没有准备好")})};return(()=>{z().then(s=>{i.value=s.data.client_side_login_switch==1})})(),(s,n)=>{const O=N;return g(),v("div",T,[w(t)!="3"?(g(),v("div",A,[n[1]||(n[1]=o("span",null,"需要登录：",-1)),p(O,{checked:i.value,"onUpdate:checked":n[0]||(n[0]=y=>i.value=y),onChange:b},null,8,["checked"])])):V("",!0),n[4]||(n[4]=o("h3",{class:"page-title"},"客户端下载",-1)),o("div",H,[o("div",M,[n[3]||(n[3]=o("div",{class:"app-name"},"ChatWiki电脑客户端",-1)),o("div",R,[n[2]||(n[2]=o("img",{src:E,alt:""},null,-1)),o("div",{class:B(["download-btn",{disabled:r.value}]),onClick:k},[p(w(m),{class:"windows-icon"}),o("span",null,F(c.value),1)],2)])])])])}}},te=C(U,[["__scopeId","data-v-ab1de799"]]);export{te as default};
