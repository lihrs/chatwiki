import{a4 as H,a5 as j,b as h,w as K,M as a,N as c,W as o,F as S,$ as D,u as y,a6 as Q,k as e,Z as k,a7 as C,a8 as E,Q as x,S as l,Y as T,e as P,x as W,D as X,a9 as Y,a0 as Z,a1 as G,a2 as J,B,V as F,aa as ee,U as te,X as U}from"./vue-chunks-BjMuQ6KD.js";import{b as w,j as oe,d as V,f as I,h as se,R as ae,r as re,k as ne,M as ce}from"../../index-CfxQ5aRu.js";import{L as le}from"./layout-logo-Q1WbtnBq.js";import{_ as ie,B as ue}from"./index-Q8_wcZdl.js";import{_ as _e,M as pe}from"./index-Bx_z5H0C.js";import"./index-CBvtIVuM.js";import{D as de}from"./dropdown-DsYo-imx.js";import{v as me}from"./validate-8MtiUsxW.js";import{F as N,_ as ve}from"./index-xqeVJHPz.js";import{_ as he}from"./index-Capld-U4.js";import{_ as fe}from"./Password-BCnVcrNJ.js";import"./index-DcUUFn-g.js";import"./axios-Cm0UX6qg.js";import"./qs-DjdPq-RR.js";import"./crypto-js-BemCeW_6.js";import"./dayjs-DK4rpucX.js";import"./DownOutlined-Gk0UBxct.js";import"./shallowequal-B6gQS78g.js";import"./Trigger-Dy6Dc2CN.js";import"./ResizeObserver.es-B1PUzC5B.js";import"./collapseMotion-BH6Vz7El.js";import"./slide-BYYxYcj9.js";import"./index-CXSrVsd0.js";import"./index-D1MiuDW_.js";import"./colors-C9XVGyX_.js";import"./RightOutlined-BHf0iqSq.js";import"./move-BjmscfYf.js";import"./isPlainObject-xAKL-sfk.js";import"./responsiveObserve-X1b6Czsg.js";import"./QuestionCircleOutlined-Deh272L3.js";import"./FormItemContext-DQ1b1ToO.js";import"./Input-C5WaaE9Z.js";import"./index-D6-G2N0k.js";import"./inputProps-D7qr__m5.js";import"./Search-DozVr2pE.js";import"./SearchOutlined-B7dGgS_P.js";import"./TextArea-CN_AI7y7.js";const ye={class:"navbar-wrapper"},be={class:"navbar"},ke=["onClick"],we={class:"nav-name"},ge={__name:"layout-navbar",setup(m){const t=H(),r=j(),i=h(()=>r.meta.activeMenu||""),u=h(()=>r.path.split("/")[1]),d=[{id:1,key:"robot",label:"robot",title:"应用",icon:"nav-robot",path:"/robot/list",permission:["RobotManage"]},{id:2,key:"library",label:"library",title:"知识库",icon:"nav-library",path:"/library/list",permission:["LibraryManage"]},{id:3,key:"PublicLibrary",label:"PublicLibrary",title:"文档",icon:"nav-doc",path:"/public-library/list",permission:["*:*:*"]},{id:4,key:"library-search",label:"library-search",title:"搜索",icon:"search",path:"/library-search/index",permission:["LibrarySearch"]},{id:5,key:"chat-monitor",label:"chat-monitor",title:"会话",icon:"nav-chat",path:"/chat-monitor/index",permission:["*:*:*"]}],n=_=>{t.push(_.path)};return K(()=>r.path,()=>{},{immediate:!0}),(_,f)=>{const v=V;return a(),c("div",ye,[o("div",be,[(a(),c(S,null,D(d,s=>(a(),c(S,null,[y(oe)(s.permission)?(a(),c("div",{class:Q(["nav-menu",{active:s.key===u.value||s.key===i.value}]),key:s.key,onClick:g=>n(s)},[e(v,{class:"nav-icon",name:s.icon},null,8,["name"]),o("span",we,k(s.title),1)],10,ke)):C("",!0)],64))),64))])])}}},$e=w(ge,[["__scopeId","data-v-7d90a540"]]),xe={class:"layout-breadcrumb"},Se={key:1,class:"page-title"},Ce={__name:"layout-breadcrumb",props:{title:{type:[String,Boolean],default:""},items:{type:[Array,Boolean],default:()=>[]}},setup(m){const t=m;return(r,i)=>{const u=E("router-link"),d=ie,n=ue;return a(),c("div",xe,[t.items.length>0?(a(),x(n,{key:0},{default:l(()=>[(a(!0),c(S,null,D(t.items,(_,f)=>(a(),c(S,{key:_.title},[f!==t.items.length-1?(a(),x(d,{key:0},{default:l(()=>[e(u,{to:_.path},{default:l(()=>[T(k(_.title),1)]),_:2},1032,["to"])]),_:2},1024)):(a(),x(d,{key:1},{default:l(()=>[T(k(_.title),1)]),_:2},1024))],64))),128))]),_:1})):(a(),c("div",Se,k(t.title),1))])}}},Ie=w(Ce,[["__scopeId","data-v-3def9f41"]]),Me={class:"layout-footer"},Pe={class:"copyright-text"},Re={__name:"layout-footer",setup(m){const t=I(),{t:r}=se(),i=P(null);return W(()=>{i.value=setInterval(()=>{setTimeout(()=>{t.refreshToken()},0)},ae)}),X(()=>{clearInterval(i.value),i.value=null}),(u,d)=>(a(),c("div",Me,[o("div",Pe,k(y(r)("common.copyright")),1)]))}},Le=w(Re,[["__scopeId","data-v-ca41b2c2"]]),O=m=>(G("data-v-2be6538f"),m=m(),J(),m),Te={key:0,class:"user-dropdown"},Be=["src"],Fe={class:"user-name"},Ue=O(()=>o("span",{class:"menu-name"},"系统管理",-1)),Ne=O(()=>o("span",{class:"menu-name"},"退出登录",-1)),je={__name:"user-dropdown",setup(m){const t=I(),{userInfo:r,avatar:i,user_name:u}=Y(t),d=()=>{t.logoutConfirm(!0)},n=()=>{window.open("/#/user/model","_blank","noopener")};return(_,f)=>{const v=V,s=_e,g=pe,b=de;return y(r)?(a(),c("div",Te,[e(b,null,{overlay:l(()=>[e(g,null,{default:l(()=>[e(s,null,{default:l(()=>[o("a",{class:"menu-item",href:"javascript:;",onClick:n},[e(v,{class:"menu-icon",name:"system-setting"}),Ue])]),_:1}),e(s,null,{default:l(()=>[o("a",{class:"menu-item",href:"javascript:;",onClick:d},[e(v,{class:"menu-icon",name:"logout"}),Ne])]),_:1})]),_:1})]),default:l(()=>[o("div",{class:"user-dropdown-link",onClick:f[0]||(f[0]=Z(()=>{},["prevent"]))},[o("img",{class:"user-avatar",src:y(i),alt:""},null,8,Be),o("span",Fe,k(y(u)),1),e(v,{name:"arrow-down",style:{"font-size":"16px",color:"#8c8c8c"}})])]),_:1})])):C("",!0)}}},De=w(je,[["__scopeId","data-v-2be6538f"]]),Ee={class:"form-box"},Ve={__name:"reset-password",setup(m,{expose:t}){const r=I(),i=N.useForm,u=P(!0),d=P("重置登录密码"),n=B({password:"",check_password:"",id:r.userInfo.user_id}),_=B({password:[{message:"请输入登录密码",required:!0},{validator:async(M,p)=>!me(p)&&p?Promise.reject("密码必须包含字母、数字或者字符中的两种，6-32位"):Promise.resolve()}],check_password:[{message:"请输入确认密码",required:!0},{validator:async(M,p)=>p!=n.password&&p?Promise.reject("两次输入的密码不一致"):Promise.resolve()}]}),{resetFields:f,validate:v,validateInfos:s}=i(n,_),g=()=>{v().then(()=>{re({...ee(n)}).then(M=>{ne.success("修改成功"),u.value=!1,r.reset(!0)})})},b=()=>{r.setResetPassModal()};return t({open}),(M,p)=>{const z=he,R=fe,L=ve,q=N,A=ce;return a(),c("div",null,[e(A,{open:u.value,"onUpdate:open":p[2]||(p[2]=$=>u.value=$),title:d.value,onOk:g,width:"520px",onCancel:b},{default:l(()=>[e(z,{class:"alert-box",message:"您还未修改初始密码，为了保障您的数据安全，请您尽快重置密码。",type:"info","show-icon":""}),o("div",Ee,[e(q,{layout:"vertical"},{default:l(()=>[e(L,F({label:"登录密码"},y(s).password),{default:l(()=>[e(R,{value:n.password,"onUpdate:value":p[0]||(p[0]=$=>n.password=$),placeholder:"密码必须包含字母、数字或者字符中的两种，6-32位"},null,8,["value"])]),_:1},16),e(L,F({label:"确认密码"},y(s).check_password),{default:l(()=>[e(R,{value:n.check_password,"onUpdate:value":p[1]||(p[1]=$=>n.check_password=$),placeholder:"请重新输入密码"},null,8,["value"])]),_:1},16)]),_:1})])]),_:1},8,["open","title"])])}}},Oe=w(Ve,[["__scopeId","data-v-40aed5c2"]]),ze={class:"admin-layout"},qe={class:"layout-header-wrapper"},Ae={class:"layout-header"},He={class:"header-left"},Ke={class:"header-body"},Qe={class:"header-right"},We={class:"item-box"},Xe={class:"layout-body"},Ye={key:0,class:"layout-breadcrumb-wrapper"},Ze={class:"layout-footer-wrapper"},Ge={__name:"index",setup(m){const t=j(),r=I(),i=h(()=>t.meta.isCustomPage||!1),u=h(()=>t.meta.pageStyle||{}),d=h(()=>t.meta.bgColor||"#ffffff"),n=h(()=>t.meta.breadcrumb||[]),_=h(()=>t.meta.hideTitle||!1),f=h(()=>t.meta.title||!1),v=h(()=>{var s;return((s=r.userInfo)==null?void 0:s.d_pass)==1&&r.isShowResetPassModal});return(s,g)=>{const b=E("router-view");return a(),c("div",ze,[o("div",qe,[o("div",Ae,[o("div",He,[e(le)]),o("div",Ke,[e($e)]),o("div",Qe,[o("div",We,[e(De)])])])]),o("div",Xe,[i.value?te(s.$slots,"default",{key:0},()=>[e(b)],!0):(a(),c("div",{key:1,class:"page-wrapper",style:U({"background-color":d.value})},[_.value?C("",!0):(a(),c("div",Ye,[e(Ie,{items:n.value,title:f.value},null,8,["items","title"])])),o("div",{class:"page-container",style:U({...u.value})},[e(b)],4)],4))]),o("div",Ze,[e(Le)]),v.value?(a(),x(Oe,{key:0})):C("",!0)])}}},Nt=w(Ge,[["__scopeId","data-v-d663ab1a"]]);export{Nt as default};
