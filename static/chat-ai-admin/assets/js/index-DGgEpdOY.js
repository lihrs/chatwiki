import{_ as q}from"./cu-scroll-B_WJBedC.js";import{i as w,e as R,f as V}from"./index-C_N0YJ9k.js";import{A as $}from"./add-collaborator-BFwdMW1F.js";import{b as U,dD as z,B as F,M as O,k as D,E as P}from"../../index-CvfGQnmW.js";import{a3 as J,d as m,z as L,S as f,U as l,O as o,X as s,j as n,N as i,a6 as a,k as X,u as _,Z,_ as E,F as g}from"./vue-chunks-BRsu9_To.js";import{P as G}from"./PlusOutlined-BsYDRa8m.js";import{A as H}from"./index-CE26VU2J.js";import{U as B}from"./UserOutlined-CvUaVWRq.js";import{D as K}from"./DownOutlined-DKJ0lkJp.js";import{C as x}from"./CheckOutlined-N7bppPAu.js";import{E as Q}from"./EditOutlined-CGnEZrbQ.js";import{E as W}from"./Password-Bl0n4Nu8.js";import{a as Y}from"./index-SYniNczA.js";import{_ as tt}from"./index-Cj1xldbi.js";import"./pull-up.esm-D94Swpvl.js";import"./observe-dom.esm-CyCedSm-.js";import"./index-CeLDnZbi.js";import"./Trigger-C5a0DMKm.js";import"./ResizeObserver.es-B1PUzC5B.js";import"./isPlainObject-C_BoBcyP.js";import"./responsiveObserve-4wudV-W8.js";import"./collapseMotion-Brd6xpAT.js";import"./index-B-ykUzgY.js";import"./colors-Cy2bPHOW.js";import"./QuestionCircleOutlined-DsT-V90y.js";import"./FormItemContext-CFzzmp00.js";import"./index-ESeBgLel.js";import"./RadioButton-Bh1r7hrP.js";import"./Checkbox-CD3yZxoG.js";import"./index-C_DWe9ZR.js";import"./index-BNsyVryY.js";import"./axios-Dq7h7Pqt.js";import"./qs-BrxkIg-9.js";import"./crypto-js-ClNpte_9.js";import"./dayjs-B6IotFah.js";import"./index-DaOSj_2K.js";import"./index-CteniEgA.js";import"./useMaxLevel-CGODDmyb.js";import"./index-Bic_ld4j.js";import"./index-B0doyz59.js";import"./slide-vrDadJH3.js";import"./SearchOutlined-B9P7O4A9.js";import"./move-CunrTozH.js";import"./CaretDownFilled-D2jjQ2Qs.js";import"./Input-DT-w6V-X.js";import"./inputProps-DJXIqADS.js";import"./fromPairs-Dx9PT-t0.js";import"./index-MLftqXg-.js";import"./LeftOutlined-CaA0Q_W1.js";import"./RightOutlined-DQOW11d0.js";import"./index-XnBLv09r.js";import"./dropdown-JwPNtE5e.js";import"./index-Cn6_tPQQ.js";import"./shallowequal-C0xnIuy8.js";import"./CaretDownOutlined-CGSacOH8.js";import"./index-DUS5CIPm.js";import"./Search-BVbdzfe3.js";import"./TextArea-B40Dha8W.js";const et={class:"content-box"},ot={key:0,class:"add-btn-block"},st={class:"list-content"},it={key:0,class:"user-block"},at={class:"name-box"},nt={class:"name"},rt={class:"remark-text"},_t={key:0,class:"hover-btn-box"},lt={key:0},pt={key:1},mt={key:2},ct={key:1,class:"hover-btn-box"},dt={class:"role-menu-box"},ut=["onClick"],yt={class:"menu-header"},kt={key:0,class:"check-box"},vt=["onClick"],ht={class:"menu-header"},bt={key:0,class:"check-box"},ft=["onClick"],gt={class:"menu-header"},xt={key:0,class:"check-box"},Ct={class:"hover-btn-box"},jt={key:0},Ot={key:1},Dt={key:2},Pt=["onClick"],Et={__name:"index",setup(Bt){const c=J().query,d=m(z(c.form_id)),u=m([]),M=L({object_id:c.form_id,object_type:3}),p=()=>{w({...M}).then(r=>{let t=r.data||[];u.value=t})};p();const C=m(null),N=()=>{C.value.show(u.value,[{object_id:+c.form_id,object_type:3,operate_rights:4}])},y=(r,t)=>{let k=t==4?"管理":t==2?"编辑":"查看";O.confirm({title:"提示?",icon:n(P),content:"确认修改该协作者权限为【"+k+"】",okText:"确认",cancelText:"取消",onOk:()=>{let v=[{object_id:+r.object_id,object_type:+r.object_type,operate_rights:+t}];R({identity_ids:r.identity_id,identity_type:r.identity_type,object_array:JSON.stringify(v)}).then(j=>{D.success("修改成功"),p()})},onCancel(){}})},T=r=>{O.confirm({title:"提示?",icon:n(P),content:"确认删除该条数据",okText:"确认",okType:"danger",cancelText:"取消",onOk:()=>{V({identity_id:r.identity_id,identity_type:r.identity_type,object_id:r.object_id,object_type:r.object_type}).then(t=>{D.success("删除成功"),p()})},onCancel(){}})},A=m([{title:"姓名",dataIndex:"name",key:"name"},{title:"权限",dataIndex:"operate_rights",key:"operate_rights"},{title:"操作",dataIndex:"action",key:"action",width:80}]);return(r,t)=>{const k=F,v=H,j=tt,I=Y,S=q;return o(),f(S,null,{default:l(()=>[s("div",et,[t[7]||(t[7]=s("div",{class:"page-title"},"权限管理",-1)),d.value==4?(o(),i("div",ot,[n(k,{type:"primary",onClick:N,icon:X(_(G))},{default:l(()=>t[0]||(t[0]=[Z("添加协助者")])),_:1,__:[0]},8,["icon"])])):a("",!0),s("div",st,[n(I,{columns:A.value,"data-source":u.value,pagination:!1},{bodyCell:l(({column:h,record:e})=>[h.key==="name"?(o(),i("div",it,[n(v,{shape:"square",src:e.avatar,size:40},{icon:l(()=>[e.avatar?a("",!0):(o(),f(_(B),{key:0}))]),_:2},1032,["src"]),s("div",at,[s("div",nt,E(e.user_name),1),s("div",rt,E(e.name),1)])])):a("",!0),h.key==="operate_rights"?(o(),i(g,{key:1},[d.value==2?(o(),i("div",_t,[e.operate_rights==4?(o(),i("span",lt,"管理")):a("",!0),e.operate_rights==2?(o(),i("span",pt,"编辑")):a("",!0),e.operate_rights==1?(o(),i("span",mt,"查看")):a("",!0)])):e.role_type==1||e.is_creator==1?(o(),i("div",ct,"管理")):(o(),f(j,{key:2,placement:"bottomRight",title:null,overlayInnerStyle:{padding:"2px"}},{content:l(()=>[s("div",dt,[s("div",{class:"role-menu",onClick:b=>y(e,4)},[s("div",yt,[n(_(B)),t[1]||(t[1]=s("span",{class:"title"},"管理",-1))]),t[2]||(t[2]=s("div",{class:"desc"},"可编辑，可删除，可查看",-1)),e.operate_rights==4?(o(),i("div",kt,[n(_(x))])):a("",!0)],8,ut),s("div",{class:"role-menu",onClick:b=>y(e,2)},[s("div",ht,[n(_(Q)),t[3]||(t[3]=s("span",{class:"title"},"编辑",-1))]),t[4]||(t[4]=s("div",{class:"desc"},"可编辑，可查看",-1)),e.operate_rights==2?(o(),i("div",bt,[n(_(x))])):a("",!0)],8,vt),s("div",{class:"role-menu",onClick:b=>y(e,1)},[s("div",gt,[n(_(W)),t[5]||(t[5]=s("span",{class:"title"},"查看",-1))]),t[6]||(t[6]=s("div",{class:"desc"},"仅查看",-1)),e.operate_rights==1?(o(),i("div",xt,[n(_(x))])):a("",!0)],8,ft)])]),default:l(()=>[s("div",Ct,[e.operate_rights==4?(o(),i("span",jt,"管理")):a("",!0),e.operate_rights==2?(o(),i("span",Ot,"编辑")):a("",!0),e.operate_rights==1?(o(),i("span",Dt,"查看")):a("",!0),n(_(K))])]),_:2},1024))],64)):a("",!0),h.key==="action"?(o(),i(g,{key:2},[d.value==4?(o(),i(g,{key:0},[e.role_type!=1&&e.is_creator!=1?(o(),i("a",{key:0,onClick:b=>T(e)},"移除",8,Pt)):a("",!0)],64)):a("",!0)],64)):a("",!0)]),_:1},8,["columns","data-source"])])]),n($,{onOk:p,ref_key:"addCollaboratorRef",ref:C},null,512)]),_:1})}}},Ie=U(Et,[["__scopeId","data-v-8f0cf1ca"]]);export{Ie as default};
