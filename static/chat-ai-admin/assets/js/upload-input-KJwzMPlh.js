import{b as w,k as i}from"../../index-CfxQ5aRu.js";import{I as F}from"./InboxOutlined-CqHQumjT.js";import{U as M}from"./index-DqFgAaLP.js";import{b as S,e as U,w as L,M as c,N as p,k as v,S as N,W as o,u as x,Z as h,F as T,$ as B,a6 as W,a1 as z,a2 as A}from"./vue-chunks-BjMuQ6KD.js";const _=l=>(z("data-v-c4a9b4f2"),l=l(),A(),l),D={class:"ant-upload-drag-icon"},E=_(()=>o("div",{class:"ant-upload-text"},"点击或将文件拖拽到这里上传",-1)),R={class:"ant-upload-hint"},V=_(()=>o("span",null,"支持文件类型：",-1)),$={__name:"upload-input",props:{value:{type:Array,default:()=>[]},maxCount:{type:Number,default:1},type:{type:[String,Number],default:0}},emits:["change","update:value"],setup(l,{emit:g}){const d=g,a=l;let n=["pdf","docx","txt","md","xlsx","csv","html"];a.type==2&&(n=["docx","csv","xlsx"]);const C=S(()=>n.map(e=>`.${e}`).join(",")),t=U([]);L(()=>a.value,e=>{t.value=e},{immediate:!0});let u=null;const b=()=>{if(t.value.length>=a.maxCount)return i.error("一次最多上传"+a.maxCount+"个文件")},m=()=>{t.value.length>a.maxCount&&i.error("一次最多上传"+a.maxCount+"个文件");let e=[...t.value];d("change",e),d("update:value",e)},y=e=>{k(e),m()},k=e=>{for(let s=0;s<t.value.length;s++)if(t.value[s].uid===e.uid){t.value.splice(s,1);break}},I=e=>{const s=e.name.split(".").pop();return n.includes(s.toLowerCase())?e.size/1024/1024<100?(t.value=[...t.value||[],e],t.value.length>a.maxCount&&(t.value=t.value.splice(0,a.maxCount)),u&&clearTimeout(u),u=setTimeout(()=>{m(),clearTimeout(u)},50),!1):(i.error("文件大小不能超过100M"),!1):(i.error("不支持的文件格式"),!1)};return(e,s)=>{const f=M;return c(),p("div",{class:W(["upload-input",{disabled:t.value.length>=a.maxCount}])},[v(f,{"file-list":t.value,name:"file",multiple:!0,"max-count":a.maxCount,accept:C.value,beforeUpload:I,onRemove:y,class:"ant-upload-drag"},{default:N(()=>[o("div",D,[v(x(F))]),E,o("div",R,[o("p",null,"一次只能上传"+h(a.maxCount)+"个文档，单个文件不超过100M",1),o("p",null,[V,(c(!0),p(T,null,B(x(n),r=>(c(),p("span",{class:"ant-upload-hint-ext",key:r},"."+h(r),1))),128))])])]),_:1},8,["file-list","max-count","accept"]),o("div",{class:"disabled-mask",onClick:b})],2)}}},G=w($,[["__scopeId","data-v-c4a9b4f2"]]);export{G as U};
