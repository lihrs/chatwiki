import{_ as A}from"./cu-scroll-ClwfOnpN.js";import{b as J,am as Q,bs as T,M as B,E as W,an as Y,at as Z,B as q,ap as K}from"../../index-CfxQ5aRu.js";import{S as R}from"./SyncOutlined-DZpJ_zyP.js";import{S as X}from"./index-BLP-Fxny.js";import{e as p,M as o,N as c,k as r,S as i,W as s,F as v,$ as w,a6 as tt,Z as e,Q as h,Y as d,u as m,a7 as l,l as st,a1 as ot,a2 as et}from"./vue-chunks-BjMuQ6KD.js";import{D as ct}from"./DownOutlined-Gk0UBxct.js";import{U as nt}from"./UpOutlined-CY9GinGn.js";import{_ as rt}from"./index-D1MiuDW_.js";const H=k=>(ot("data-v-9e7df6fd"),k=k(),et(),k),it={class:"prompt-wrapper"},lt={class:"group-box"},at=H(()=>s("div",{class:"main-title"},"导入提示词",-1)),dt={class:"group-list-box"},_t=["onClick"],ut={class:"group-name"},pt={class:"name-text"},vt={class:"content-box"},ht={class:"opration-btn-block"},mt={class:"content-scroll-box"},kt={key:0,class:"loading-box"},yt={class:"prompt-list-box"},bt={class:"prompt-header"},gt={class:"prompt-title"},ft={key:0,class:"prompt-type diy"},Ct={key:1,class:"prompt-type"},xt={class:"title"},It={class:"right-btn-box"},St=["onClick"],wt=["onClick"],Ht={class:"prompt-content-box"},Lt={key:0,class:"prompt-content"},jt=["onClick"],Ot={key:1,class:"structure-list-box"},Nt={class:"structure-list"},Bt={class:"structure-title"},$t={class:"structure-content"},Pt={class:"structure-list"},Vt={class:"structure-title"},Dt={class:"structure-content"},Et=["onClick"],Gt={class:"structure-list"},Mt={class:"structure-title"},Ut={class:"structure-content"},zt={key:0,class:"structure-list"},Ft={class:"structure-title"},At={class:"structure-content"},Jt={class:"structure-list"},Qt={class:"structure-title"},Tt={class:"structure-content"},Wt={class:"structure-list"},Yt={class:"structure-title"},Zt={class:"structure-content"},qt={class:"structure-title"},Kt={class:"structure-content"},Rt={class:"empty-content"},Xt=H(()=>s("div",{class:"title"},"你还没有添加任何提示词",-1)),ts=H(()=>s("div",{class:"desc"}," 可以在系统设置-提示词库中维护提示词模板，然后再聊天机器人和工作流中引用 ",-1)),ss={__name:"index",emits:["ok"],setup(k,{expose:$,emit:P}){const y=p(!1),V=P,D=()=>{y.value=!0,j(),x()},E=n=>{B.confirm({title:"导入确认",icon:st(W),content:"确定将该条提示导入",onOk(){V("ok",n),y.value=!1},onCancel(){}})},g=p(-1),L=p([]),j=()=>{Y().then(n=>{L.value=[{id:-1,group_name:"全部"},{id:0,group_name:"默认分组"},...n.data]})},G=n=>{g.value=n.id,x()},f=p([]),C=p(!1),b=p(!1),M=()=>{b.value=!0,x(),j()},x=()=>{C.value=!0,Z({group_id:g.value,page:1,size:9999}).then(n=>{let _=n.data.list||[];_=_.map(u=>({...u,isHide:!0,prompt_struct:u.prompt_struct?JSON.parse(u.prompt_struct):{}})),f.value=_}).finally(()=>{C.value=!1,b.value=!1})},I=n=>{n.isHide=!n.isHide},O=()=>{window.open("#/user/prompt-library")};return $({show:D}),(n,_)=>{const u=rt,N=A,S=q,U=X,z=K,F=B;return o(),c("div",null,[r(F,{open:y.value,"onUpdate:open":_[0]||(_[0]=t=>y.value=t),title:null,width:950,footer:null,wrapClassName:"add-prommpt-modal"},{default:i(()=>[s("div",it,[s("div",lt,[at,r(N,{style:{height:"480px"}},{default:i(()=>[s("div",dt,[(o(!0),c(v,null,w(L.value,t=>(o(),c("div",{class:tt(["group-list",{active:t.id==g.value}]),onClick:a=>G(t),key:t.id},[s("div",ut,[s("div",pt,e(t.group_name),1),t.group_desc?(o(),h(u,{key:0},{title:i(()=>[d(e(t.group_desc),1)]),default:i(()=>[r(m(Q))]),_:2},1024)):l("",!0)])],10,_t))),128))])]),_:1})]),s("div",vt,[s("div",ht,[r(S,{loading:b.value,onClick:M},{default:i(()=>[b.value?l("",!0):(o(),h(m(R),{key:0})),d("刷新列表")]),_:1},8,["loading"]),r(S,{onClick:O},{default:i(()=>[d("管理知识库")]),_:1})]),s("div",mt,[r(N,{style:{padding:"0 24px"}},{default:i(()=>[C.value?(o(),c("div",kt,[r(U)])):l("",!0),s("div",yt,[(o(!0),c(v,null,w(f.value,t=>(o(),c("div",{class:"prompt-list",key:t.id},[s("div",bt,[s("div",gt,[t.prompt_type==0?(o(),c("div",ft,"自定义")):l("",!0),t.prompt_type==1?(o(),c("div",Ct,"结构化")):l("",!0),s("div",xt,e(t.title),1)]),s("div",It,[r(u,{title:t.isHide?"展开":"收起"},{default:i(()=>[s("div",{class:"hover-btn-box",onClick:a=>I(t)},[t.isHide?(o(),h(m(ct),{key:0})):(o(),h(m(nt),{key:1}))],8,St)]),_:2},1032,["title"]),s("div",{class:"hover-btn-box primary",onClick:a=>E(t)},[r(m(T)),d("导入 ")],8,wt)])]),s("div",Ht,[t.prompt_type==0?(o(),c("div",Lt,[t.isHide?(o(),c(v,{key:0},[d(e(t.prompt.slice(0,200))+" ",1),t.prompt.length>200?(o(),c("span",{key:0,onClick:a=>I(t),style:{cursor:"pointer"}},"...",8,jt)):l("",!0)],64)):(o(),c(v,{key:1},[d(e(t.prompt),1)],64))])):(o(),c("div",Ot,[s("div",Nt,[s("div",Bt,e(t.prompt_struct.role.subject),1),s("div",$t,e(t.prompt_struct.role.describe),1)]),s("div",Pt,[s("div",Vt,e(t.prompt_struct.task.subject),1),s("div",Dt,[d(e(t.prompt_struct.task.describe)+" ",1),t.isHide?(o(),c("span",{key:0,onClick:a=>I(t),style:{cursor:"pointer"}},"...",8,Et)):l("",!0)])]),t.isHide?l("",!0):(o(),c(v,{key:0},[s("div",Gt,[s("div",Mt,e(t.prompt_struct.constraints.subject),1),s("div",Ut,e(t.prompt_struct.constraints.describe),1)]),t.prompt_struct.skill?(o(),c("div",zt,[s("div",Ft,e(t.prompt_struct.skill.subject),1),s("div",At,e(t.prompt_struct.skill.describe),1)])):l("",!0),s("div",Jt,[s("div",Qt,e(t.prompt_struct.output.subject),1),s("div",Tt,e(t.prompt_struct.output.describe),1)]),s("div",Wt,[s("div",Yt,e(t.prompt_struct.tone.subject),1),s("div",Zt,e(t.prompt_struct.tone.describe),1)]),(o(!0),c(v,null,w(t.prompt_struct.custom,a=>(o(),c("div",{class:"structure-list",key:a.subject},[s("div",qt,e(a.subject),1),s("div",Kt,e(a.describe),1)]))),128))],64))]))])]))),128))]),f.value.length==0?(o(),h(z,{key:1,style:{"padding-top":"100px"}},{description:i(()=>[s("div",Rt,[Xt,ts,s("div",null,[r(S,{type:"primary",onClick:O},{default:i(()=>[d("立即添加")]),_:1})])])]),_:1})):l("",!0)]),_:1})])])])]),_:1},8,["open"])])}}},ds=J(ss,[["__scopeId","data-v-9e7df6fd"]]);export{ds as I};
