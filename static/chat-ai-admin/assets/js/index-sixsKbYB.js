import{b as M,l as F,dC as x,k as f,B as N,M as O,E as V,d as A}from"../../index-CfxQ5aRu.js";import{a4 as L,e as b,b as R,M as p,N as v,W as t,k as s,S as a,Z as l,Q as j,a7 as z,F as g,$ as G,u as J,Y as Q,a0 as _,a1 as W,a2 as Y}from"./vue-chunks-BjMuQ6KD.js";import{A as Z,_ as q}from"./add-data-sheet-Dx-1nOd9.js";import{g as H,d as K}from"./index-BERrfq5W.js";import{P as U}from"./page-tabs-BMG_UNOd.js";import{_ as X}from"./page-alert-D48cNvXY.js";import{_ as tt,M as ot}from"./index-Bx_z5H0C.js";import"./index-CBvtIVuM.js";import{D as et}from"./dropdown-DsYo-imx.js";import{P as st}from"./PlusOutlined-xiVHYVI8.js";import"./axios-Cm0UX6qg.js";import"./qs-DjdPq-RR.js";import"./crypto-js-BemCeW_6.js";import"./dayjs-DK4rpucX.js";import"./index-xqeVJHPz.js";import"./Trigger-Dy6Dc2CN.js";import"./ResizeObserver.es-B1PUzC5B.js";import"./isPlainObject-xAKL-sfk.js";import"./responsiveObserve-X1b6Czsg.js";import"./collapseMotion-BH6Vz7El.js";import"./index-D1MiuDW_.js";import"./colors-C9XVGyX_.js";import"./QuestionCircleOutlined-Deh272L3.js";import"./FormItemContext-DQ1b1ToO.js";import"./index-DcUUFn-g.js";import"./Input-C5WaaE9Z.js";import"./index-D6-G2N0k.js";import"./inputProps-D7qr__m5.js";import"./Search-DozVr2pE.js";import"./SearchOutlined-B7dGgS_P.js";import"./TextArea-CN_AI7y7.js";import"./index-CXSrVsd0.js";import"./Password-BCnVcrNJ.js";import"./shallowequal-B6gQS78g.js";import"./slide-BYYxYcj9.js";import"./RightOutlined-BHf0iqSq.js";import"./move-BjmscfYf.js";const C=c=>(W("data-v-dd264bd9"),c=c(),Y(),c),it={class:"library-page"},at=C(()=>t("div",null,[t("p",null," 1、数据库可以关联到问答机器人，从对话中提取信息存储到指定数据表中，也可以利用数据表中已有数据回复用户咨询。创建机器人之前请先创建知识库，然后去机器人设置中关联。 "),t("p",null,"2、支持Excel模版和Json模版导入已有数据，也支持将存储的数据导出Excel表。")],-1)),nt={class:"library-page-body"},rt={class:"list-toolbar"},lt={class:"toolbar-box"},ct={class:"list-total"},dt={class:"toolbar-box"},pt={class:"list-box"},_t=["onClick"],mt={class:"library-info"},ut=C(()=>t("img",{class:"library-icon",src:q,alt:""},null,-1)),ft={class:"library-info-content"},bt={class:"library-title"},vt={class:"item-body"},ht={class:"library-desc"},kt={class:"item-footer"},yt={class:"library-size"},xt={class:"text-item"},gt={class:"text-item"},Ct=["onClick"],St=["onClick"],wt={__name:"index",setup(c){L();const S=b([{title:"知识库",path:"/library/list"},{title:"数据库",path:"/database/list"}]),w=F();let{role_permission:B}=w;const D=R(()=>B.includes("FormCreate")),m=b([]),u=()=>{H({}).then(o=>{m.value=o.data||[]})};u();const h=b(null),k=(o={})=>{if(o.id){let e=x(o.id);if(!(e==4||e==2))return f.error("您没有编辑该数据库的权限")}h.value.show(o)},P=o=>{window.open(`/#/database/details?form_id=${o.id}&name=${o.name}`,"_blank","noopener")},T=o=>{if(x(o.id)!=4)return f.error("您没有删除该数据库的权限");let n=3,d=O.confirm({title:"删除确认",icon:s(V),content:`删除数据表后，表中所有数据将一并被删除，不可恢复。确认删除数据表${o.name}吗?`,okText:n+" 确 定",okType:"danger",okButtonProps:{disabled:!0},cancelText:"取 消",onOk(){$(o)},onCancel(){}}),r=setInterval(()=>{n==1?(d.update({okText:"确 定",okButtonProps:{disabled:!1}}),clearInterval(r),r=void 0):(n-=1,d.update({okText:n+" 确 定",okButtonProps:{disabled:!0}}))},1e3)},$=({id:o})=>{K({id:o}).then(()=>{f.success("删除成功"),u()})};return(o,e)=>{const n=N,d=A,r=tt,E=ot,I=et;return p(),v(g,null,[t("div",it,[s(U,{class:"mb-16",tabs:S.value,active:"/database/list"},null,8,["tabs"]),s(X,{style:{"margin-bottom":"16px"},title:"使用说明"},{default:a(()=>[at]),_:1}),t("div",nt,[t("div",rt,[t("div",lt,[t("h3",ct,"全部 ("+l(m.value.length)+")",1)]),t("div",dt,[D.value?(p(),j(n,{key:0,type:"primary",onClick:e[0]||(e[0]=i=>k())},{icon:a(()=>[s(J(st))]),default:a(()=>[Q(" 新建数据库 ")]),_:1})):z("",!0)])]),t("div",pt,[(p(!0),v(g,null,G(m.value,i=>(p(),v("div",{class:"list-item-wrapper",key:i.id},[t("div",{class:"list-item",onClick:_(y=>P(i),["stop"])},[t("div",mt,[ut,t("div",ft,[t("div",bt,l(i.name),1)])]),t("div",vt,[t("div",ht,l(i.description),1)]),t("div",kt,[t("div",yt,[t("span",xt,"数据数："+l(i.entry_count)+"条",1),t("span",gt,"关联应用："+l(i.robot_nums||0),1)]),t("div",{class:"action-box",onClick:e[2]||(e[2]=_(()=>{},["stop"]))},[s(I,null,{overlay:a(()=>[s(E,null,{default:a(()=>[s(r,null,{default:a(()=>[t("a",{href:"javascript:;",onClick:_(y=>k(i),["stop"])},"编 辑",8,Ct)]),_:2},1024),s(r,null,{default:a(()=>[t("a",{class:"delete-text-color",href:"javascript:;",onClick:y=>T(i)},"删 除",8,St)]),_:2},1024)]),_:2},1024)]),default:a(()=>[t("div",{class:"action-item",onClick:e[1]||(e[1]=_(()=>{},["stop"]))},[s(d,{class:"action-icon",name:"point-h"})])]),_:2},1024)])])],8,_t)]))),128))])])]),s(Z,{onOk:u,ref_key:"addDataSheetRef",ref:h},null,512)],64)}}},co=M(wt,[["__scopeId","data-v-dd264bd9"]]);export{co as default};
