import{a5 as w,b as m,l as i,a8 as y,M as u,N as d,k,S as _,F as R,$ as S,Q as h,u as N,Y as B,Z as v,f as V,W as p,a7 as K,a4 as L,a9 as W}from"./vue-chunks-BjMuQ6KD.js";import{u as g}from"./robot-Buya70Kq.js";import{b as I,d as c,ay as q}from"../../index-CfxQ5aRu.js";import{_ as j,M as E}from"./index-Bx_z5H0C.js";import"./index-W8wCYhw3.js";import"./axios-Cm0UX6qg.js";import"./qs-DjdPq-RR.js";import"./crypto-js-BemCeW_6.js";import"./dayjs-DK4rpucX.js";import"./shallowequal-B6gQS78g.js";import"./Trigger-Dy6Dc2CN.js";import"./ResizeObserver.es-B1PUzC5B.js";import"./collapseMotion-BH6Vz7El.js";import"./slide-BYYxYcj9.js";import"./index-CXSrVsd0.js";import"./index-D1MiuDW_.js";import"./colors-C9XVGyX_.js";const F={class:"left-menu-box"},P={__name:"left-menu",props:{robotInfo:{type:Object,default:()=>{}}},emits:["changeMenu"],setup(o,{emit:f}){const t=w(),n=o,l=t.query,e=m(()=>[t.path.split("/")[3]]),r=[{key:"workflow",id:"workflow",icon:()=>i(c,{name:"workflow",class:"menu-icon"}),label:"工作流编排",title:"工作流编排",path:"/robot/config/workflow"},{key:"basic-config",id:"basic-config",icon:()=>i(c,{name:"jichupeizhi",class:"menu-icon"}),label:"基础配置",title:"基础配置",path:"/robot/config/basic-config"},{key:"external-services",id:"external-services",icon:()=>i(c,{name:"duiwaifuwu",class:"menu-icon"}),label:"对外服务",title:"对外服务",path:"/robot/config/external-services"},{key:"test",id:"test",icon:()=>i(c,{name:"liaotianceshi",class:"menu-icon"}),label:"聊天测试",title:"聊天测试",path:"/robot/test",query:{robot_key:n.robotInfo.robot_key,id:n.robotInfo.id},target:"_blank"},{key:"qa-feedbacks",id:"qa-feedbacks",icon:()=>i(c,{name:"qa-feedback",class:"menu-icon"}),label:"问答反馈",title:"问答反馈",path:"/robot/config/qa-feedbacks"},{key:"session-record",id:"session-record",icon:()=>i(c,{name:"session-record",class:"menu-icon"}),label:"会话记录",title:"会话记录",path:"/robot/config/session-record",query:{robot_key:n.robotInfo.robot_key,id:n.robotInfo.id}},{key:"statistical_analysis",id:"statistical_analysis",icon:()=>i(c,{name:"statistical-analysis",class:"menu-icon"}),label:"统计分析",title:"统计分析",path:"/robot/config/statistical_analysis"},{key:"export-record",id:"export-record",icon:()=>i(c,{name:"export-record",class:"menu-icon"}),label:"导出记录",title:"导出记录",path:"/robot/config/export-record"}],b=m(()=>q(l.id)==1?r.filter(a=>a.id=="external-services"):n.robotInfo.application_type==0?r.filter(a=>a.id!="workflow"):r.filter(a=>a.id!="basic-config")),M=({item:a})=>{e.value.includes(a.id)};return(a,H)=>{const $=j,C=y("router-link"),x=E;return u(),d("div",F,[k(x,{class:"left-menu",selectedKeys:e.value,onClick:M},{default:_(()=>[(u(!0),d(R,null,S(b.value,s=>(u(),h(C,{class:"default-color",tag:"a",target:s.target||"_self",to:{path:s.path,query:s.query||N(l)},key:s.key},{default:_(()=>[(u(),h($,{icon:s.icon,path:s.path,key:s.key},{default:_(()=>[B(v(s.label),1)]),_:2},1032,["icon","path"]))]),_:2},1032,["target","to"]))),128))]),_:1},8,["selectedKeys"])])}}},T=I(P,[["__scopeId","data-v-07181a10"]]),z=V({name:"robotPage",components:{leftMenu:T},async beforeRouteEnter(o,f,t){const n=g(),{getRobot:l,robotInfo:e}=n;await l(o.query.id);let r=q(o.query.id);if(r==0){t("/no-permission");return}if(r==1){window.location.href=`${e.h5_domain}/#/chat/pc?robot_key=${e.robot_key}`,t("/robot/list");return}if(e.application_type==1&&o.name=="basicConfig"){t(`/robot/config/workflow?id=${e.id}&robot_key=${e.robot_key}`);return}if(e.application_type==0&&o.name=="robotWorkflow"){t(`/robot/config/basic-config?id=${e.id}&robot_key=${e.robot_key}`);return}t()},setup(){const o=L(),f=g(),{robotInfo:t}=W(f),n=m(()=>w().name!="robotWorkflow");return{robotInfo:t,changeMenu:e=>{o.push({path:e.path,query:{robot_key:t.value.robot_key,id:t.value.id}})},isShowLeft:n}}}),D={class:"robot-page-layout"},O={key:0,class:"layout-left"},Q={class:"robot-name-box"},Y=["src"],Z={class:"robot-name"},A={class:"layout-body"};function G(o,f,t,n,l,e){const r=y("leftMenu"),b=y("router-view");return u(),d("div",D,[o.isShowLeft?(u(),d("div",O,[p("div",Q,[p("img",{class:"robot-avatar",src:o.robotInfo.robot_avatar_url,alt:""},null,8,Y),p("span",Z,v(o.robotInfo.robot_name),1)]),k(r,{onChangeMenu:o.changeMenu,robotInfo:o.robotInfo},null,8,["onChangeMenu","robotInfo"])])):K("",!0),p("div",A,[k(b)])])}const _o=I(z,[["render",G],["__scopeId","data-v-4048fbdb"]]);export{_o as default};
