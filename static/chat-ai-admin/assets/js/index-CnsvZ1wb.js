import{_ as ot}from"./cu-scroll-ClwfOnpN.js";import{A as St,al as Ct,k as H,M as F,b as Z,am as Ot,an as jt,E as ct,ao as wt,B as X,ap as tt,aq as Lt,d as pt,ar as It,as as Pt,at as Ut,au as At,av as Dt}from"../../index-CfxQ5aRu.js";import{k as e,B as K,e as f,M as a,N as p,S as n,W as t,Y as P,l as et,u as g,F as D,$ as T,a6 as Mt,Z as l,Q as R,a7 as G,a0 as Nt,a5 as Et,z as Gt,a1 as st,a2 as nt}from"./vue-chunks-BjMuQ6KD.js";import"./index-DcUUFn-g.js";import{I as lt}from"./Input-C5WaaE9Z.js";import{_ as dt,F as ut}from"./index-xqeVJHPz.js";import{_ as _t}from"./TextArea-CN_AI7y7.js";import{E as mt,_ as vt,M as ht}from"./index-Bx_z5H0C.js";import"./index-CBvtIVuM.js";import{D as ft}from"./dropdown-DsYo-imx.js";import{P as rt}from"./PlusOutlined-xiVHYVI8.js";import{_ as bt}from"./index-D1MiuDW_.js";import{M as Ht}from"./model-select-c6lAzYs5.js";import{_ as Tt}from"./index-C3Es6Ui_.js";import{S as gt}from"./index-BLP-Fxny.js";import{S as kt,_ as yt}from"./index-BuS_bfCI.js";import{U as Rt}from"./UpOutlined-CY9GinGn.js";import{D as zt}from"./DownOutlined-Gk0UBxct.js";import{E as Bt}from"./EditOutlined-COZMcG4o.js";import{_ as Vt}from"./index-Qxwv7brO.js";import"./pull-up.esm-JZ91zQ8P.js";import"./observe-dom.esm-DPKTicVt.js";import"./axios-Cm0UX6qg.js";import"./qs-DjdPq-RR.js";import"./crypto-js-BemCeW_6.js";import"./dayjs-DK4rpucX.js";import"./FormItemContext-DQ1b1ToO.js";import"./index-D6-G2N0k.js";import"./Search-DozVr2pE.js";import"./SearchOutlined-B7dGgS_P.js";import"./isPlainObject-xAKL-sfk.js";import"./inputProps-D7qr__m5.js";import"./Password-BCnVcrNJ.js";import"./Trigger-Dy6Dc2CN.js";import"./ResizeObserver.es-B1PUzC5B.js";import"./responsiveObserve-X1b6Czsg.js";import"./collapseMotion-BH6Vz7El.js";import"./QuestionCircleOutlined-Deh272L3.js";import"./index-CXSrVsd0.js";import"./shallowequal-B6gQS78g.js";import"./slide-BYYxYcj9.js";import"./RightOutlined-BHf0iqSq.js";import"./move-BjmscfYf.js";import"./colors-C9XVGyX_.js";import"./index-d7geF-HW.js";import"./index-D8Y0HnA5.js";import"./CheckOutlined-BLsT0eZM.js";var qt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-600 72h560v208H232V136zm560 480H232V408h560v208zm0 272H232V680h560v208zM304 240a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"database",theme:"outlined"};const Jt=qt;function it(m){for(var b=1;b<arguments.length;b++){var k=arguments[b]!=null?Object(arguments[b]):{},y=Object.keys(k);typeof Object.getOwnPropertySymbols=="function"&&(y=y.concat(Object.getOwnPropertySymbols(k).filter(function(u){return Object.getOwnPropertyDescriptor(k,u).enumerable}))),y.forEach(function(u){Ft(m,u,k[u])})}return m}function Ft(m,b,k){return b in m?Object.defineProperty(m,b,{value:k,enumerable:!0,configurable:!0,writable:!0}):m[b]=k,m}var at=function(b,k){var y=it({},b,k.attrs);return e(St,it({},y,{icon:Jt}),null)};at.displayName="DatabaseOutlined";at.inheritAttrs=!1;const Wt=at,Qt={__name:"add-group",emits:["ok"],setup(m,{expose:b,emit:k}){const y=k,u=K({id:"",group_name:"",group_desc:""}),$=f(!1),L=f("新建分组"),s=f(!1),O=f(null),M=(x={})=>{O.value&&O.value.resetFields(),u.group_name=x.group_name||"",u.group_desc=x.group_desc||"",u.id=x.id||"",L.value=x.id?"编辑分组":"新建分组",s.value=!0},v=()=>{O.value.validate().then(()=>{Ct({...u}).then(()=>{y("ok"),H.success(`${L.value}成功`),s.value=!1})})};return b({show:M}),(x,S)=>{const U=lt,i=dt,E=_t,A=ut,h=F;return a(),p("div",null,[e(h,{open:s.value,"onUpdate:open":S[2]||(S[2]=I=>s.value=I),"confirm-loading":$.value,title:L.value,width:"476px",onOk:v},{default:n(()=>[e(A,{style:{"margin-top":"24px"},layout:"vertical",ref_key:"formRef",ref:O,model:u},{default:n(()=>[e(i,{name:"group_name",label:"分组名称",rules:[{required:!0,message:"请输入分组名称"}]},{default:n(()=>[e(U,{value:u.group_name,"onUpdate:value":S[0]||(S[0]=I=>u.group_name=I),placeholder:"请输入，最多10个字",maxLength:10},null,8,["value"])]),_:1}),e(i,{name:"group_desc",label:"分组描述"},{default:n(()=>[e(E,{style:{height:"80px"},maxLength:100,value:u.group_desc,"onUpdate:value":S[1]||(S[1]=I=>u.group_desc=I),placeholder:"请输入"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open","confirm-loading","title"])])}}},Yt={class:"group-wrapper"},Zt={class:"group-box"},Xt=["onClick"],Kt={class:"group-name"},te={class:"name-text"},ee={class:"hover-btn-box"},oe=["onClick"],se=["onClick"],ne={__name:"group-list",emits:["change","load"],setup(m,{emit:b}){const k=b,y=f(-1),u=f([]),$=()=>{jt().then(v=>{u.value=[{id:-1,group_name:"全部"},{id:0,group_name:"默认分组"},...v.data],k("load",u.value)})};$();const L=v=>{y.value=v.id,k("change",v)},s=f(null),O=v=>{s.value.show({...v})},M=v=>{F.confirm({title:"删除确认",icon:et(ct),content:`确定要删除分组【${v.group_name}】吗？`,okText:"删除",okType:"danger",cancelText:"取消",onOk(){wt({id:v.id}).then(x=>{v.id==y.value&&L(u.value[0]),$(),H.success("删除成功")})},onCancel(){}})};return(v,x)=>{const S=X,U=bt,i=vt,E=ht,A=ft;return a(),p(D,null,[t("div",Yt,[t("div",null,[e(S,{onClick:x[0]||(x[0]=h=>O({})),icon:et(g(rt)),block:""},{default:n(()=>[P("添加分组")]),_:1},8,["icon"])]),t("div",Zt,[(a(!0),p(D,null,T(u.value,h=>(a(),p("div",{class:Mt(["group-list",{active:h.id==y.value}]),onClick:I=>L(h),key:h.id},[t("div",Kt,[t("div",te,l(h.group_name),1),h.group_desc?(a(),R(U,{key:0},{title:n(()=>[P(l(h.group_desc),1)]),default:n(()=>[e(g(Ot))]),_:2},1024)):G("",!0)]),h.id>0?(a(),p("div",{key:0,class:"right-block",onClick:x[1]||(x[1]=Nt(()=>{},["stop"]))},[e(A,null,{overlay:n(()=>[e(E,null,{default:n(()=>[e(i,null,{default:n(()=>[t("div",{onClick:I=>O(h)},"编 辑",8,oe)]),_:2},1024),e(i,null,{default:n(()=>[t("div",{style:{color:"#fb363f"},onClick:I=>M(h)},"删 除",8,se)]),_:2},1024)]),_:2},1024)]),default:n(()=>[t("div",ee,[e(g(mt))])]),_:2},1024)])):G("",!0)],10,Xt))),128))])]),e(Qt,{ref_key:"addGroupRef",ref:s,onOk:$},null,512)],64)}}},le=Z(ne,[["__scopeId","data-v-2b90ce82"]]),$t=m=>(st("data-v-d3b8ea6d"),m=m(),nt(),m),re={class:"ai-create-box"},ae={class:"input-box"},ie={class:"input-box"},ce=$t(()=>t("span",null,"生成",-1)),pe={class:"quick-tags-box"},de=$t(()=>t("div",{class:"quick-label"},"快捷生成：",-1)),ue={class:"ai-list-box"},_e={key:0,class:"loading-box"},me={key:0,class:"prompt-list-box"},ve={class:"prompt-list"},he={class:"prompt-header"},fe={class:"prompt-title"},be={class:"prompt-content"},ge={class:"prompt-list"},ke={class:"prompt-header"},ye={class:"prompt-title"},$e={class:"prompt-content"},xe={class:"prompt-list"},Se={class:"prompt-header"},Ce={class:"prompt-title"},Oe={class:"prompt-content"},je={class:"prompt-list"},we={class:"prompt-header"},Le={class:"prompt-title"},Ie={class:"prompt-content"},Pe={class:"prompt-list"},Ue={class:"prompt-header"},Ae={class:"prompt-title"},De={class:"prompt-content"},Me={class:"prompt-list"},Ne={class:"prompt-header"},Ee={class:"prompt-title"},Ge={class:"prompt-content"},He={class:"prompt-header"},Te={class:"prompt-title"},Re={class:"prompt-content"},ze={key:1,class:"empty-box"},Be={__name:"ai-create-prompt",emits:["handleAiSave"],setup(m,{expose:b,emit:k}){const y=tt.PRESENTED_IMAGE_SIMPLE,u=f(!1),$=f(!1);Et().query;const L=k,s=f(""),O=f(!1),M=[{title:"创建一个电商行业售后客服"},{title:"创建一个英语教育机构官网售前机器人"}],v=f("在上方输入框输入要求，点击生成提示词"),x=()=>{S.value=!1,i.promptStruct=U,s.value="",v.value="在上方输入框输入要求，点击生成提示词",u.value=!0},S=f(!1),U={role:{subject:"",describe:""},task:{subject:"",describe:""},constraints:{subject:"",describe:""},skill:{subject:"",describe:""},output:{subject:"",describe:""},tone:{subject:"",describe:""},custom:[]},i=K({promptStruct:U,use_model:"",model_config_id:""}),E=d=>{s.value=d},A=()=>{if(!s.value)return H.error("请输入AI 生成提示词");if(O.value)return H.error("正在生成中...");O.value=!0,Lt({demand:s.value,use_model:i.use_model,model_config_id:i.model_config_id}).then(d=>{i.promptStruct=JSON.parse(d.data.promptStruct),S.value=!0}).finally(()=>{O.value=!1}).catch(d=>{S.value=!1,v.value=d.msg})},h=d=>{Gt(()=>{var o,_,j;i.model_config_id=(o=d[0])==null?void 0:o.model_config_id,i.use_model=(j=(_=d[0])==null?void 0:_.children[0])==null?void 0:j.name})},I=()=>{if(!S.value)return H.error("请先生成提示词");L("handleAiSave",i.promptStruct),u.value=!1};return b({show:x}),(d,o)=>{const _=X,j=Ht,z=lt,B=pt,w=Tt,V=gt,q=tt,W=ot,Q=F;return a(),p("div",null,[e(Q,{open:u.value,"onUpdate:open":o[3]||(o[3]=C=>u.value=C),title:"AI 生成提示词",width:746},{footer:n(()=>[e(_,{type:"primary",loading:$.value,onClick:I},{default:n(()=>[P("使用该提示")]),_:1},8,["loading"])]),default:n(()=>[t("div",re,[t("div",ae,[e(j,{modelType:"LLM",modeName:i.use_model,"onUpdate:modeName":o[0]||(o[0]=C=>i.use_model=C),modeId:i.model_config_id,"onUpdate:modeId":o[1]||(o[1]=C=>i.model_config_id=C),style:{width:"300px"},onLoaded:h},null,8,["modeName","modeId"])]),t("div",ie,[e(z,{style:{width:"100%"},value:s.value,"onUpdate:value":o[2]||(o[2]=C=>s.value=C),size:"large",onPressEnter:A,placeholder:"请输入AI 生成提示词例如：创建一个电商行业售后客服"},null,8,["value"]),t("div",{class:"btn-box",onClick:A},[e(B,{name:"ai-mark"}),ce])]),t("div",pe,[de,(a(),p(D,null,T(M,C=>e(w,{key:C.title,onClick:c=>E(C.title),color:"blue"},{default:n(()=>[P(l(C.title),1)]),_:2},1032,["onClick"])),64))]),t("div",ue,[e(W,{style:{height:"100%"}},{default:n(()=>[O.value?(a(),p("div",_e,[e(V,{tip:"正在生成中..."})])):(a(),p(D,{key:1},[S.value?(a(),p("div",me,[t("div",ve,[t("div",he,[t("div",fe,l(i.promptStruct.role.subject),1)]),t("div",be,l(i.promptStruct.role.describe),1)]),t("div",ge,[t("div",ke,[t("div",ye,l(i.promptStruct.task.subject),1)]),t("div",$e,l(i.promptStruct.task.describe),1)]),t("div",xe,[t("div",Se,[t("div",Ce,l(i.promptStruct.constraints.subject),1)]),t("div",Oe,l(i.promptStruct.constraints.describe),1)]),t("div",je,[t("div",we,[t("div",Le,l(i.promptStruct.skill.subject),1)]),t("div",Ie,l(i.promptStruct.skill.describe),1)]),t("div",Pe,[t("div",Ue,[t("div",Ae,l(i.promptStruct.output.subject),1)]),t("div",De,l(i.promptStruct.output.describe),1)]),t("div",Me,[t("div",Ne,[t("div",Ee,l(i.promptStruct.tone.subject),1)]),t("div",Ge,l(i.promptStruct.tone.describe),1)]),(a(!0),p(D,null,T(i.promptStruct.custom,(C,c)=>(a(),p("div",{class:"prompt-list",key:c+C.key?C.key:""},[t("div",He,[t("div",Te,l(C.subject),1)]),t("div",Re,l(C.describe),1)]))),128))])):(a(),p("div",ze,[e(q,{image:g(y),description:v.value},null,8,["image","description"])]))],64))]),_:1})])])]),_:1},8,["open"])])}}},Ve=Z(Be,[["__scopeId","data-v-d3b8ea6d"]]),qe=m=>(st("data-v-a5fa67e0"),m=m(),nt(),m),Je={key:1,class:"prompt-list-box"},Fe={class:"header-box"},We=qe(()=>t("div",{class:"header-left"},"提示词",-1)),Qe={class:"prompt-list"},Ye={class:"prompt-header"},Ze={class:"prompt-title"},Xe={class:"prompt-content"},Ke={class:"prompt-list"},to={class:"prompt-header"},eo={class:"prompt-title"},oo={class:"prompt-content"},so={class:"prompt-list"},no={class:"prompt-header"},lo={class:"prompt-title"},ro={class:"prompt-content"},ao={class:"prompt-list"},io={class:"prompt-header"},co={class:"prompt-title"},po={class:"prompt-content"},uo={class:"prompt-list"},_o={class:"prompt-header"},mo={class:"prompt-title"},vo={class:"prompt-content"},ho={class:"prompt-list"},fo={class:"prompt-header"},bo={class:"prompt-title"},go={class:"prompt-content"},ko={class:"prompt-header"},yo={class:"prompt-title",style:{flex:"1"}},$o={class:"btn-wrapper-box"},xo=["onClick"],So={class:"prompt-content"},Co={class:"add-theme-block"},Oo={__name:"add-diy-prompt",props:{groupList:{type:Array,default:()=>[]}},emits:["ok"],setup(m,{expose:b,emit:k}){const y=k,u=m;let $={role:"请输入，告知大模型要扮演的身份、职责、沟通风格等，比如“你扮演一名经验丰富的电商行业售后客服AI助手，具备良好的沟通能力和解决问题的能力。”",task:"请输入，比如“根据提供的知识库资料，找到对应的售后知识（每个知识点之间使用⧼-split_line-⧽进行分割），快速准确回答用户的问题。”",constraints:"请输入对大模型在回复时的要求，比如“你的回答应该使用自然的对话方式，简单直接地回答，不要解释你的答案；当用户问题没有找到相关知识点时，直接告诉用户问题暂时无法回答，不能胡编乱造，否则你将受到惩罚。”",output:"请输入对大模型输出格式的要求，比如“请使用markdown格式输出”",tone:"请告知语言风格要求，比如“专业而不失亲切，适当使用emoji增强可读性”",skill:"请输入"},L={role:{subject:"角色",describe:""},task:{subject:"任务",describe:""},constraints:{subject:"要求",describe:""},skill:{subject:"技能",describe:""},output:{subject:"输出格式",describe:""},tone:{subject:"风格语气",describe:""},custom:[]};const s=K({id:"",title:"",group_id:0,prompt_type:0,prompt:"",prompt_struct:JSON.parse(JSON.stringify(L))}),O=f(!1),M=f(""),v=f(!1),x=f(null),S=(d={},o)=>{x.value&&x.value.resetFields(),s.title=d.title||"",s.group_id=d.group_id>0?d.group_id:0,s.id=o=="copy"?"":d.id||"",s.prompt_type=d.prompt_type,s.prompt=d.prompt||"",s.prompt_struct=d.prompt_struct||JSON.parse(JSON.stringify(L)),M.value=`${d.id?"编辑":"新建"}${d.prompt_type==0?"自定义":"结构化"}提示词`,v.value=!0},U=()=>{x.value.validate().then(()=>{let d={...s};s.prompt_type==0?delete d.prompt_struct:d.prompt_struct=JSON.stringify(s.prompt_struct),Pt({...d}).then(()=>{y("ok"),H.success(`${M.value}成功`),v.value=!1})})},i=f(null),E=()=>{i.value.show()},A=d=>{s.prompt_struct=d},h=()=>{s.prompt_struct.custom.push({subject:"",describe:"",key:Math.random()*1e4})},I=d=>{s.prompt_struct.custom.splice(d,1)};return b({show:S}),(d,o)=>{const _=lt,j=dt,z=kt,B=yt,w=_t,V=pt,q=X,W=ut,Q=ot,C=F;return a(),p("div",null,[e(C,{open:v.value,"onUpdate:open":o[9]||(o[9]=c=>v.value=c),"confirm-loading":O.value,title:M.value,width:"766px",onOk:U},{default:n(()=>[e(Q,{style:{"max-height":"600px","margin-top":"24px"}},{default:n(()=>[e(W,{"label-col":{span:3},"wrapper-col":{span:21},ref_key:"formRef",ref:x,model:s},{default:n(()=>[e(j,{name:"title",label:"提示词标题",rules:[{required:!0,message:"请输入提示词标题"}]},{default:n(()=>[e(_,{value:s.title,"onUpdate:value":o[0]||(o[0]=c=>s.title=c),placeholder:"请输入提示词标题",maxLength:10},null,8,["value"])]),_:1}),e(j,{name:"group_id",label:"分组"},{default:n(()=>[e(B,{value:s.group_id,"onUpdate:value":o[1]||(o[1]=c=>s.group_id=c),style:{width:"100%"}},{default:n(()=>[(a(!0),p(D,null,T(u.groupList,c=>(a(),R(z,{value:c.id},{default:n(()=>[P(l(c.group_name),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value"])]),_:1}),s.prompt_type==0?(a(),R(j,{key:0,name:"prompt",label:"提示词",rules:[{required:!0,message:"请输入提示词"}]},{default:n(()=>[e(w,{style:{height:"280px"},value:s.prompt,"onUpdate:value":o[2]||(o[2]=c=>s.prompt=c),placeholder:"请输入"},null,8,["value"])]),_:1})):(a(),p("div",Je,[t("div",Fe,[We,t("div",{class:"ai-mark-box",onClick:E},[e(V,{name:"ai-mark"}),P(" AI自动生成 ")])]),t("div",Qe,[t("div",Ye,[t("div",Ze,l(s.prompt_struct.role.subject),1)]),t("div",Xe,[e(w,{style:{height:"80px"},bordered:!1,value:s.prompt_struct.role.describe,"onUpdate:value":o[3]||(o[3]=c=>s.prompt_struct.role.describe=c),placeholder:g($).role},null,8,["value","placeholder"])])]),t("div",Ke,[t("div",to,[t("div",eo,l(s.prompt_struct.task.subject),1)]),t("div",oo,[e(w,{style:{height:"80px"},bordered:!1,value:s.prompt_struct.task.describe,"onUpdate:value":o[4]||(o[4]=c=>s.prompt_struct.task.describe=c),placeholder:g($).task},null,8,["value","placeholder"])])]),t("div",so,[t("div",no,[t("div",lo,l(s.prompt_struct.constraints.subject),1)]),t("div",ro,[e(w,{style:{height:"80px"},bordered:!1,value:s.prompt_struct.constraints.describe,"onUpdate:value":o[5]||(o[5]=c=>s.prompt_struct.constraints.describe=c),placeholder:g($).constraints},null,8,["value","placeholder"])])]),t("div",ao,[t("div",io,[t("div",co,l(s.prompt_struct.skill.subject),1)]),t("div",po,[e(w,{style:{height:"80px"},bordered:!1,value:s.prompt_struct.skill.describe,"onUpdate:value":o[6]||(o[6]=c=>s.prompt_struct.skill.describe=c),placeholder:g($).skill},null,8,["value","placeholder"])])]),t("div",uo,[t("div",_o,[t("div",mo,l(s.prompt_struct.output.subject),1)]),t("div",vo,[e(w,{style:{height:"80px"},bordered:!1,value:s.prompt_struct.output.describe,"onUpdate:value":o[7]||(o[7]=c=>s.prompt_struct.output.describe=c),placeholder:g($).output},null,8,["value","placeholder"])])]),t("div",ho,[t("div",fo,[t("div",bo,l(s.prompt_struct.tone.subject),1)]),t("div",go,[e(w,{style:{height:"80px"},bordered:!1,value:s.prompt_struct.tone.describe,"onUpdate:value":o[8]||(o[8]=c=>s.prompt_struct.tone.describe=c),placeholder:g($).tone},null,8,["value","placeholder"])])]),(a(!0),p(D,null,T(s.prompt_struct.custom,(c,Y)=>(a(),p("div",{class:"prompt-list",key:Y+c.key?c.key:""},[t("div",ko,[t("div",yo,[e(_,{bordered:!1,style:{width:"100%"},value:c.subject,"onUpdate:value":J=>c.subject=J,placeholder:"请输入主题"},null,8,["value","onUpdate:value"])]),t("div",$o,[t("div",{class:"hover-btn-box",onClick:J=>I(Y)},[e(g(It))],8,xo)])]),t("div",So,[e(w,{style:{height:"80px"},bordered:!1,value:c.describe,"onUpdate:value":J=>c.describe=J,placeholder:"请输入"},null,8,["value","onUpdate:value"])])]))),128)),t("div",Co,[e(q,{onClick:h,block:"",icon:et(g(rt))},{default:n(()=>[P("添加主题")]),_:1},8,["icon"])])]))]),_:1},8,["model"])]),_:1})]),_:1},8,["open","confirm-loading","title"]),e(Ve,{onHandleAiSave:A,ref_key:"aiCreatePromptRef",ref:i},null,512)])}}},jo=Z(Oo,[["__scopeId","data-v-a5fa67e0"]]),xt=m=>(st("data-v-89be7750"),m=m(),nt(),m),wo={class:"user-model-page"},Lo={class:"page-title"},Io=xt(()=>t("div",{class:"desc"}," 添加提示词模板，在应用配置和工作流的AI对话节点，可以从提示词模板库选择提示词并应用 ",-1)),Po={class:"list-wrapper"},Uo={class:"left-group"},Ao={class:"right-cotnetn"},Do={class:"content-box"},Mo={class:"btn-block"},No={key:0,class:"loading-box"},Eo={class:"prompt-list-box"},Go={class:"prompt-header"},Ho={class:"prompt-title"},To={key:0,class:"prompt-type diy"},Ro={key:1,class:"prompt-type"},zo={class:"title"},Bo={class:"right-btn-box"},Vo=["onClick"],qo=["onClick"],Jo={class:"hover-btn-box"},Fo=["onClick"],Wo=["onClick"],Qo=["onClick"],Yo={class:"prompt-content-box"},Zo={key:0,class:"prompt-content"},Xo=["onClick"],Ko={key:1,class:"structure-list-box"},ts={class:"structure-list"},es={class:"structure-title"},os={class:"structure-content"},ss={class:"structure-list"},ns={class:"structure-title"},ls={class:"structure-content"},rs=["onClick"],as={class:"structure-list"},is={class:"structure-title"},cs={class:"structure-content"},ps={class:"structure-list"},ds={class:"structure-title"},us={class:"structure-content"},_s={class:"structure-list"},ms={class:"structure-title"},vs={class:"structure-content"},hs={class:"structure-list"},fs={class:"structure-title"},bs={class:"structure-content"},gs={class:"structure-title"},ks={class:"structure-content"},ys={class:"move-group-box"},$s=xt(()=>t("div",{class:"label-text"},"修改分组为",-1)),xs={__name:"index",setup(m){let b=-1;const k=o=>{b=o.id,s()};let y=f([]);const u=o=>{y.value=o.filter(_=>_.id>=0)},$=f([]),L=f(!1),s=()=>{L.value=!0,Ut({group_id:b,page:1,size:9999}).then(o=>{let _=o.data.list||[];_=_.map(j=>({...j,isHide:!0,prompt_struct:j.prompt_struct?JSON.parse(j.prompt_struct):{}})),$.value=_}).finally(()=>{L.value=!1})};s();const O=f(null),M=o=>{O.value.show({group_id:b==-1?0:b,prompt_type:o})},v=(o,_)=>{O.value.show({...o},_)};function x(o){var _;return(_=y.value.filter(j=>j.id==o)[0])==null?void 0:_.group_name}const S=o=>{o.isHide=!o.isHide},U=f(!0),i=()=>{U.value=!U.value,$.value=$.value.map(o=>({...o,isHide:U.value}))},E=o=>{F.confirm({title:"删除确认",icon:e(ct),content:`确定要删除提示词[${o.title}]吗？`,okText:"删除",okType:"danger",cancelText:"取消",onOk(){Dt({id:o.id}).then(_=>{H.success("删除成功"),s()})},onCancel(){}})},A=f(!1);let h=K({id:"",group_id:0});const I=o=>{o={...o},h.id=o.id,h.group_id=o.group_id>0?o.group_id:0,A.value=!0},d=()=>{if(h.id<0)return H.error("请选择要移动的分组");At({id:h.id,group_id:h.group_id}).then(()=>{H.success("移动成功"),A.value=!1,s()})};return(o,_)=>{const j=Vt,z=ot,B=X,w=vt,V=ht,q=ft,W=gt,Q=bt,C=tt,c=kt,Y=yt,J=F;return a(),p("div",wo,[t("div",Lo,[P(" 提示词模板库 "),e(j,{type:"vertical"}),Io]),t("div",Po,[t("div",Uo,[e(z,null,{default:n(()=>[e(le,{onChange:k,onLoad:u})]),_:1})]),t("div",Ao,[e(z,null,{default:n(()=>[t("div",Do,[t("div",Mo,[e(q,null,{overlay:n(()=>[e(V,null,{default:n(()=>[e(w,null,{default:n(()=>[t("div",{onClick:_[0]||(_[0]=r=>M(1))},"添加结构化提示词")]),_:1}),e(w,null,{default:n(()=>[t("div",{onClick:_[1]||(_[1]=r=>M(0))},"添加自定义提示词")]),_:1})]),_:1})]),default:n(()=>[e(B,{type:"primary",icon:e(g(rt))},{default:n(()=>[P("提示词")]),_:1},8,["icon"])]),_:1}),e(B,{onClick:i,icon:e(g(Wt))},{default:n(()=>[P(l(U.value?"全部展开":"全部收起"),1)]),_:1},8,["icon"])]),L.value?(a(),p("div",No,[e(W)])):G("",!0),t("div",Eo,[(a(!0),p(D,null,T($.value,r=>(a(),p("div",{class:"prompt-list",key:r.id},[t("div",Go,[t("div",Ho,[r.prompt_type==0?(a(),p("div",To,"自定义")):G("",!0),r.prompt_type==1?(a(),p("div",Ro,"结构化")):G("",!0),t("div",zo,l(r.title),1),e(j,{type:"vertical"}),t("div",null,l(x(r.group_id)),1)]),t("div",Bo,[e(Q,{title:r.isHide?"展开":"收起"},{default:n(()=>[t("div",{class:"hover-btn-box",onClick:N=>S(r)},[r.isHide?(a(),R(g(zt),{key:0})):(a(),R(g(Rt),{key:1}))],8,Vo)]),_:2},1032,["title"]),t("div",{class:"hover-btn-box",onClick:N=>v(r)},[e(g(Bt))],8,qo),e(q,null,{overlay:n(()=>[e(V,null,{default:n(()=>[e(w,null,{default:n(()=>[t("div",{onClick:N=>v(r,"copy")},"复制",8,Fo)]),_:2},1024),e(w,null,{default:n(()=>[t("div",{onClick:N=>I(r)},"修改分组",8,Wo)]),_:2},1024),e(w,null,{default:n(()=>[t("div",{onClick:N=>E(r)},"删除",8,Qo)]),_:2},1024)]),_:2},1024)]),default:n(()=>[t("div",Jo,[e(g(mt))])]),_:2},1024)])]),t("div",Yo,[r.prompt_type==0?(a(),p("div",Zo,[r.isHide?(a(),p(D,{key:0},[P(l(r.prompt.slice(0,200))+" ",1),r.prompt.length>200?(a(),p("span",{key:0,onClick:N=>S(r),style:{cursor:"pointer"}},"...",8,Xo)):G("",!0)],64)):(a(),p(D,{key:1},[P(l(r.prompt),1)],64))])):(a(),p("div",Ko,[t("div",ts,[t("div",es,l(r.prompt_struct.role.subject),1),t("div",os,l(r.prompt_struct.role.describe),1)]),t("div",ss,[t("div",ns,l(r.prompt_struct.task.subject),1),t("div",ls,[P(l(r.prompt_struct.task.describe)+" ",1),r.isHide?(a(),p("span",{key:0,onClick:N=>S(r),style:{cursor:"pointer"}},"...",8,rs)):G("",!0)])]),r.isHide?G("",!0):(a(),p(D,{key:0},[t("div",as,[t("div",is,l(r.prompt_struct.constraints.subject),1),t("div",cs,l(r.prompt_struct.constraints.describe),1)]),t("div",ps,[t("div",ds,l(r.prompt_struct.skill.subject),1),t("div",us,l(r.prompt_struct.skill.describe),1)]),t("div",_s,[t("div",ms,l(r.prompt_struct.output.subject),1),t("div",vs,l(r.prompt_struct.output.describe),1)]),t("div",hs,[t("div",fs,l(r.prompt_struct.tone.subject),1),t("div",bs,l(r.prompt_struct.tone.describe),1)]),(a(!0),p(D,null,T(r.prompt_struct.custom,N=>(a(),p("div",{class:"structure-list",key:N.subject},[t("div",gs,l(N.subject),1),t("div",ks,l(N.describe),1)]))),128))],64))]))])]))),128))])]),$.value.length==0?(a(),R(C,{key:0,style:{"padding-top":"100px"}})):G("",!0)]),_:1})])]),e(jo,{groupList:g(y),onOk:s,ref_key:"addDiyPromptRef",ref:O},null,8,["groupList"]),e(J,{open:A.value,"onUpdate:open":_[3]||(_[3]=r=>A.value=r),title:"修改分组",onOk:d},{default:n(()=>[t("div",ys,[$s,e(Y,{value:g(h).group_id,"onUpdate:value":_[2]||(_[2]=r=>g(h).group_id=r),style:{width:"100%"}},{default:n(()=>[(a(!0),p(D,null,T(g(y),r=>(a(),R(c,{value:r.id},{default:n(()=>[P(l(r.group_name),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value"])])]),_:1},8,["open"])])}}},bn=Z(xs,[["__scopeId","data-v-89be7750"]]);export{bn as default};
