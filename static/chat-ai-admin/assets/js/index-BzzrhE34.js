import{_ as R}from"./cu-scroll-ClwfOnpN.js";import{i as V,e as $,f as F}from"./index-OIK33vUW.js";import{A as U}from"./add-collaborator-CFHr-dvH.js";import{b as z,dC as J,M as P,E as S,k as B,B as L}from"../../index-CfxQ5aRu.js";import{a5 as Q,e as d,B as W,M as e,Q as x,S as p,W as o,N as s,k as a,Y,l as Z,u as _,a7 as i,Z as D,F as C,a1 as G,a2 as H}from"./vue-chunks-BjMuQ6KD.js";import{A as K}from"./index-DjukszQZ.js";import{P as X}from"./PlusOutlined-xiVHYVI8.js";import{U as E}from"./UserOutlined-kSSEuP4H.js";import{C as j}from"./CheckOutlined-BLsT0eZM.js";import{E as tt}from"./EditOutlined-COZMcG4o.js";import{E as et}from"./Password-BCnVcrNJ.js";import{D as ot}from"./DownOutlined-Gk0UBxct.js";import{_ as st}from"./index-C-uK-k7U.js";import{a as it}from"./index-P3IiyBCy.js";import"./pull-up.esm-JZ91zQ8P.js";import"./observe-dom.esm-DPKTicVt.js";import"./index-xqeVJHPz.js";import"./Trigger-Dy6Dc2CN.js";import"./ResizeObserver.es-B1PUzC5B.js";import"./isPlainObject-xAKL-sfk.js";import"./responsiveObserve-X1b6Czsg.js";import"./collapseMotion-BH6Vz7El.js";import"./index-D1MiuDW_.js";import"./colors-C9XVGyX_.js";import"./QuestionCircleOutlined-Deh272L3.js";import"./FormItemContext-DQ1b1ToO.js";import"./index-DPiF7UEG.js";import"./RadioButton-_iRIgmgW.js";import"./Checkbox-DQe8ZxR1.js";import"./index-CxLzlFzW.js";import"./index-BSl1-tWC.js";import"./axios-Cm0UX6qg.js";import"./qs-DjdPq-RR.js";import"./crypto-js-BemCeW_6.js";import"./dayjs-DK4rpucX.js";import"./index-CXSrVsd0.js";import"./index-C38XHIGB.js";import"./useMaxLevel-C9fYQrQA.js";import"./index-BuS_bfCI.js";import"./index-D6-G2N0k.js";import"./slide-BYYxYcj9.js";import"./SearchOutlined-B7dGgS_P.js";import"./move-BjmscfYf.js";import"./CaretDownFilled-CgS0_Akm.js";import"./Input-C5WaaE9Z.js";import"./inputProps-D7qr__m5.js";import"./css-DbBMd65r.js";import"./fromPairs-Dx9PT-t0.js";import"./index-BLP-Fxny.js";import"./LeftOutlined-qzkQKHcF.js";import"./RightOutlined-BHf0iqSq.js";import"./index-CBvtIVuM.js";import"./dropdown-DsYo-imx.js";import"./index-Bx_z5H0C.js";import"./shallowequal-B6gQS78g.js";import"./CaretDownOutlined-Qu8nVykI.js";import"./index-DcUUFn-g.js";import"./Search-DozVr2pE.js";import"./TextArea-CN_AI7y7.js";const r=l=>(G("data-v-931394c9"),l=l(),H(),l),at={class:"content-box"},nt=r(()=>o("div",{class:"page-title"},"权限管理",-1)),_t={key:0,class:"add-btn-block"},ct={class:"list-content"},rt={key:0,class:"user-block"},pt={class:"name-box"},lt={class:"name"},mt={class:"remark-text"},dt={key:0,class:"hover-btn-box"},ut={key:0},ht={key:1},yt={key:2},kt={key:1,class:"hover-btn-box"},vt={class:"role-menu-box"},bt=["onClick"],ft={class:"menu-header"},gt=r(()=>o("span",{class:"title"},"管理",-1)),xt=r(()=>o("div",{class:"desc"},"可编辑，可删除，可查看",-1)),Ct={key:0,class:"check-box"},jt=["onClick"],Ot={class:"menu-header"},It=r(()=>o("span",{class:"title"},"编辑",-1)),Pt=r(()=>o("div",{class:"desc"},"可编辑，可查看",-1)),St={key:0,class:"check-box"},Bt=["onClick"],Dt={class:"menu-header"},Et=r(()=>o("span",{class:"title"},"查看",-1)),Mt=r(()=>o("div",{class:"desc"},"仅查看",-1)),Nt={key:0,class:"check-box"},Tt={class:"hover-btn-box"},wt={key:0},At={key:1},qt={key:2},Rt=["onClick"],Vt={__name:"index",setup(l){const u=Q().query,h=d(J(u.form_id)),y=d([]),M=W({object_id:u.form_id,object_type:3}),m=()=>{V({...M}).then(n=>{let c=n.data||[];y.value=c})};m();const O=d(null),N=()=>{O.value.show(y.value,[{object_id:+u.form_id,object_type:3,operate_rights:4}])},k=(n,c)=>{let v=c==4?"管理":c==2?"编辑":"查看";P.confirm({title:"提示?",icon:a(S),content:"确认修改该协作者权限为【"+v+"】",okText:"确认",cancelText:"取消",onOk:()=>{let b=[{object_id:+n.object_id,object_type:+n.object_type,operate_rights:+c}];$({identity_ids:n.identity_id,identity_type:n.identity_type,object_array:JSON.stringify(b)}).then(I=>{B.success("修改成功"),m()})},onCancel(){}})},T=n=>{P.confirm({title:"提示?",icon:a(S),content:"确认删除该条数据",okText:"确认",okType:"danger",cancelText:"取消",onOk:()=>{F({identity_id:n.identity_id,identity_type:n.identity_type,object_id:n.object_id,object_type:n.object_type}).then(c=>{B.success("删除成功"),m()})},onCancel(){}})},w=d([{title:"姓名",dataIndex:"name",key:"name"},{title:"权限",dataIndex:"operate_rights",key:"operate_rights"},{title:"操作",dataIndex:"action",key:"action",width:80}]);return(n,c)=>{const v=L,b=K,I=st,A=it,q=R;return e(),x(q,null,{default:p(()=>[o("div",at,[nt,h.value==4?(e(),s("div",_t,[a(v,{type:"primary",onClick:N,icon:Z(_(X))},{default:p(()=>[Y("添加协助者")]),_:1},8,["icon"])])):i("",!0),o("div",ct,[a(A,{columns:w.value,"data-source":y.value,pagination:!1},{bodyCell:p(({column:f,record:t})=>[f.key==="name"?(e(),s("div",rt,[a(b,{shape:"square",src:t.avatar,size:40},{icon:p(()=>[t.avatar?i("",!0):(e(),x(_(E),{key:0}))]),_:2},1032,["src"]),o("div",pt,[o("div",lt,D(t.user_name),1),o("div",mt,D(t.name),1)])])):i("",!0),f.key==="operate_rights"?(e(),s(C,{key:1},[h.value==2?(e(),s("div",dt,[t.operate_rights==4?(e(),s("span",ut,"管理")):i("",!0),t.operate_rights==2?(e(),s("span",ht,"编辑")):i("",!0),t.operate_rights==1?(e(),s("span",yt,"查看")):i("",!0)])):t.role_type==1||t.is_creator==1?(e(),s("div",kt,"管理")):(e(),x(I,{key:2,placement:"bottomRight",title:null,overlayInnerStyle:{padding:"2px"}},{content:p(()=>[o("div",vt,[o("div",{class:"role-menu",onClick:g=>k(t,4)},[o("div",ft,[a(_(E)),gt]),xt,t.operate_rights==4?(e(),s("div",Ct,[a(_(j))])):i("",!0)],8,bt),o("div",{class:"role-menu",onClick:g=>k(t,2)},[o("div",Ot,[a(_(tt)),It]),Pt,t.operate_rights==2?(e(),s("div",St,[a(_(j))])):i("",!0)],8,jt),o("div",{class:"role-menu",onClick:g=>k(t,1)},[o("div",Dt,[a(_(et)),Et]),Mt,t.operate_rights==1?(e(),s("div",Nt,[a(_(j))])):i("",!0)],8,Bt)])]),default:p(()=>[o("div",Tt,[t.operate_rights==4?(e(),s("span",wt,"管理")):i("",!0),t.operate_rights==2?(e(),s("span",At,"编辑")):i("",!0),t.operate_rights==1?(e(),s("span",qt,"查看")):i("",!0),a(_(ot))])]),_:2},1024))],64)):i("",!0),f.key==="action"?(e(),s(C,{key:2},[h.value==4?(e(),s(C,{key:0},[t.role_type!=1&&t.is_creator!=1?(e(),s("a",{key:0,onClick:g=>T(t)},"移除",8,Rt)):i("",!0)],64)):i("",!0)],64)):i("",!0)]),_:1},8,["columns","data-source"])])]),a(U,{onOk:m,ref_key:"addCollaboratorRef",ref:O},null,512)]),_:1})}}},Le=z(Vt,[["__scopeId","data-v-931394c9"]]);export{Le as default};
