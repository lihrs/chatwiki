import{b as j,l as G,B as K,aw as W,ax as q,d as X,ay as Z,k,M as R,E as h}from"../../index-DGlN_gTP.js";import{d as u,b as A,q as z,N as y,X as e,j as s,U as n,S as H,a6 as J,F as Q,a1 as Y,a2 as oo,O as m,a0 as r,Z as to,u as C,_ as g}from"./vue-chunks-BRsu9_To.js";import{g as eo,c as so,r as no}from"./index-D9NnHyqS.js";import{A as io}from"./add-robot-alert-2Ot-DxD-.js";import{_ as ao}from"./page-alert-Bz3nV4Vs.js";import{L as lo}from"./list-tabs-Dw_EhttP.js";import"./index-Jd-vOpFR.js";import{D as ro}from"./dropdown-0QsfqJqV.js";import{P as co}from"./PlusOutlined-D8SGrPLQ.js";import{M as po,_ as _o}from"./index-D35sYO_B.js";import{_ as uo}from"./index-BQDPftJ3.js";import"./axios-Dq7h7Pqt.js";import"./qs-BrxkIg-9.js";import"./crypto-js-ClNpte_9.js";import"./dayjs-B6IotFah.js";import"./index-D9KRCCIf.js";import"./index-vDDFetvc.js";import"./Trigger-oBKhEx1B.js";import"./ResizeObserver.es-B1PUzC5B.js";import"./isPlainObject-51jSOJKV.js";import"./responsiveObserve-BLoLQTqt.js";import"./collapseMotion-Brd6xpAT.js";import"./QuestionCircleOutlined-Bvo9_S3-.js";import"./FormItemContext-DAoPsdM7.js";import"./index-3U3efXj8.js";import"./Password-B9FCv-aw.js";import"./Input-BpI49rDY.js";import"./index-C0cXlrXm.js";import"./inputProps-Bu_dzA3C.js";import"./DownloadOutlined-3aTO680L.js";import"./CheckOutlined-B_Hs0-OP.js";import"./robot-Bza63Zse.js";import"./index-JAP4Oum8.js";import"./Search-CH76L-gx.js";import"./SearchOutlined-DSY7YbKD.js";import"./TextArea-BNOG6RQ7.js";import"./index-k9nX7Zez.js";import"./RightOutlined-TchQhXHc.js";import"./move-BSoEcIoa.js";import"./slide-Ccxw2gRU.js";import"./colors-DKWwHq2l.js";import"./shallowequal-C0xnIuy8.js";const mo={class:"robot-page"},bo={class:"list-toolbar"},vo={class:"toolbar-box"},fo={class:"toolbar-box"},ko={class:"create-action"},yo=["src"],Co={class:"create-action"},go=["src"],$o={class:"list-box"},wo=["onClick"],xo={class:"list-item"},To={class:"robot-info"},Ro=["src"],ho={class:"robot-info-content"},Ao={class:"robot-name"},Bo={class:"robot-type-tag"},Po={class:"robot-desc"},Lo=["onClick"],Oo=["onClick"],No=["onClick"],Do=["onClick"],Eo=["onClick"],Mo={__name:"robot-list",setup(Vo){const $=u([{title:"全部 (0)",value:"2"},{title:"聊天机器人 (0)",value:"0"},{title:"工作流 (0)",value:"1"}]),B=G();let{role_permission:P,role_type:L}=B;const O=A(()=>L==1||P.includes("RobotCreate"));oo();const p=u("2"),b=u([]),N=A(()=>p.value==2?b.value:b.value.filter(t=>t.application_type==p.value)),v=()=>{eo().then(t=>{let o=0,a=0,l=0;t.data.forEach(c=>{c.application_type==0?a++:l++,o++}),$.value=[{title:"全部 ("+o+")",value:"2"},{title:"聊天机器人 ("+a+")",value:"0"},{title:"工作流 ("+l+")",value:"1"}],b.value=t.data}).catch(()=>{})},w=u(null),x=t=>{w.value.open(t)},D=({id:t,robot_key:o,application_type:a})=>{a==0?window.open(`/#/robot/config/basic-config?id=${t}&robot_key=${o}`,"_blank","noopener"):window.open(`/#/robot/config/workflow?id=${t}&robot_key=${o}`,"_blank","noopener")},E=t=>{if(Z(t.id)!=4)return k.error("您没有删除机器人的权限");let a=3,l=R.confirm({title:`删除机器人${t.robot_name}`,icon:s(h),content:"您确定要删除此机器人吗？",okText:a+" 确 定",okType:"danger",cancelText:"取 消",okButtonProps:{disabled:!0},onOk(){M(t)},onCancel(){}}),c=setInterval(()=>{a==1?(l.update({okText:"确 定",okButtonProps:{disabled:!1}}),clearInterval(c),c=void 0):(a-=1,l.update({okText:a+" 确 定",okButtonProps:{disabled:!0}}))},1e3)},M=({id:t})=>{so({id:t}).then(()=>{k.success("删除成功"),v()})},V=t=>{let o=3,a=R.confirm({title:`复制机器人${t.robot_name}`,icon:s(h),content:"您确定要复制此机器人吗？",okText:o+" 确 定",okType:"danger",cancelText:"取 消",okButtonProps:{disabled:!0},onOk(){F(t)},onCancel(){}}),l=setInterval(()=>{o==1?(a.update({okText:"确 定",okButtonProps:{disabled:!1}}),clearInterval(l),l=void 0):(o-=1,a.update({okText:o+" 确 定",okButtonProps:{disabled:!0}}))},1e3)},F=({id:t})=>{no({id:t}).then(()=>{k.success("复制成功"),v()})},I=t=>{window.open(`#/robot/test?robot_key=${t.robot_key}&id=${t.id}`)},S=t=>{window.open(`#/robot/config/session-record?robot_key=${t.robot_key}&id=${t.id}`)},U=t=>{window.open(`#/robot/config/statistical_analysis?robot_key=${t.robot_key}&id=${t.id}`)};return z(()=>{v()}),(t,o)=>{const a=K,l=_o,c=po,T=ro,_=X,f=uo;return m(),y("div",mo,[o[10]||(o[10]=e("h3",{class:"page-title"},"应用",-1)),s(ao,{class:"mb-16",title:"使用说明"},{default:n(()=>o[6]||(o[6]=[e("div",null,[e("p",null," 1、应用包括两种类型：聊天机器人、工作流。聊天机器人适合新手用户，关联知识库后只需简单配置，即可创建一个基于私有知识库的问答机器人。工作流适合高级用户，利用系统预制节点自定义任务流程，适合解决复杂任务。 "),e("p",null,"2、发现模块也提供了丰富模版，可以根据需要选择适合模版快速创建应用。")],-1)])),_:1,__:[6]}),e("div",bo,[e("div",vo,[s(lo,{tabs:$.value,value:p.value,"onUpdate:value":o[0]||(o[0]=i=>p.value=i)},null,8,["tabs","value"])]),e("div",fo,[O.value?(m(),H(T,{key:0},{overlay:n(()=>[s(c,null,{default:n(()=>[s(l,{onClick:o[2]||(o[2]=r(i=>x(0),["prevent"]))},{default:n(()=>[e("span",ko,[e("img",{class:"icon",src:C(W),alt:""},null,8,yo),o[8]||(o[8]=e("span",null,"聊天机器人",-1))])]),_:1}),s(l,{onClick:o[3]||(o[3]=r(i=>x(1),["prevent"]))},{default:n(()=>[e("span",Co,[e("img",{class:"icon",src:C(q),alt:""},null,8,go),o[9]||(o[9]=e("span",null,"工作流",-1))])]),_:1})]),_:1})]),default:n(()=>[s(a,{type:"primary",onClick:o[1]||(o[1]=r(()=>{},["prevent"]))},{icon:n(()=>[s(C(co))]),default:n(()=>[o[7]||(o[7]=to(" 创建应用 "))]),_:1,__:[7]})]),_:1})):J("",!0)])]),e("div",$o,[(m(!0),y(Q,null,Y(N.value,i=>(m(),y("div",{class:"list-item-wrapper",key:i.id,onClick:d=>D(i)},[e("div",xo,[e("div",To,[e("img",{class:"robot-avatar",src:i.robot_avatar,alt:""},null,8,Ro),e("div",ho,[e("div",Ao,g(i.robot_name),1),e("div",Bo,g(i.application_type==0?"聊天机器人":"工作流"),1)])]),e("div",Po,g(i.robot_intro),1),e("div",{class:"robot-action",onClick:o[5]||(o[5]=r(()=>{},["stop"]))},[s(f,{title:"聊天测试"},{default:n(()=>[e("div",{class:"robot-action-item",onClick:r(d=>I(i),["stop"])},[s(_,{class:"action-icon",name:"chat"})],8,Lo)]),_:2},1024),s(f,{title:"会话记录"},{default:n(()=>[e("div",{class:"robot-action-item",onClick:r(d=>S(i),["stop"])},[s(_,{class:"action-icon",name:"session"})],8,Oo)]),_:2},1024),s(f,{title:"统计分析"},{default:n(()=>[e("div",{class:"robot-action-item",onClick:r(d=>U(i),["stop"])},[s(_,{class:"action-icon",name:"analysis"})],8,No)]),_:2},1024),s(T,null,{overlay:n(()=>[s(c,null,{default:n(()=>[s(l,null,{default:n(()=>[e("a",{class:"delete-text-color",href:"javascript:;",onClick:d=>E(i)},"删 除",8,Do)]),_:2},1024),s(l,null,{default:n(()=>[e("a",{class:"copy-text-color",href:"javascript:;",onClick:d=>V(i)},"复 制",8,Eo)]),_:2},1024)]),_:2},1024)]),default:n(()=>[e("div",{class:"robot-action-item",onClick:o[4]||(o[4]=r(()=>{},["stop"]))},[s(_,{class:"action-icon",name:"point-h"})])]),_:2},1024)])])],8,wo))),128))]),s(io,{ref_key:"addRobotAlertRef",ref:w},null,512)])}}},Rt=j(Mo,[["__scopeId","data-v-54a961ac"]]);export{Rt as default};
