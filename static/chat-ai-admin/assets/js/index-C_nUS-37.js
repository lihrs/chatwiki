import{_ as j}from"./cu-scroll--3BQ5Tfd.js";import{s as J,g as U,a as V,b as W,d as A}from"./index-_Iji3Db_.js";import{d as m,N as _,O as n,j as d,U as l,X as s,Z as y,a6 as $,F as z,a1 as D,a0 as E,_ as b,a3 as F,z as P,u as q,S as L}from"./vue-chunks-BRsu9_To.js";import{b as R,M as T,k as N,B as Q,E as X}from"../../index-5YmK49PT.js";import"./index-D5xnDPHV.js";import{_ as Z,R as G}from"./RadioButton-BOA7hXbN.js";import{C as H}from"./index-6z-4GDNJ.js";import{_ as K}from"./TextArea-srALwtoG.js";import{P as Y}from"./PlusOutlined-CMRQwZGc.js";import{a as tt}from"./index-5A-oefQw.js";import{_ as et}from"./index-BlLboPxR.js";import{_ as ot}from"./index-pONGOd-d.js";import{_ as st}from"./index-CIH_Nbt3.js";import"./pull-up.esm-D94Swpvl.js";import"./observe-dom.esm-CyCedSm-.js";import"./axios-Dq7h7Pqt.js";import"./qs-BrxkIg-9.js";import"./crypto-js-ClNpte_9.js";import"./dayjs-B6IotFah.js";import"./FormItemContext-CEomr4ey.js";import"./Checkbox-DdXoTH-0.js";import"./index-B6Ux9iTH.js";import"./index-DKf75RQ4.js";import"./index-D-Ceyk84.js";import"./ResizeObserver.es-B1PUzC5B.js";import"./inputProps-DdSvkSVM.js";import"./index-Cxugkp18.js";import"./useMaxLevel-CDGNXJj0.js";import"./index-CY6Uw_HG.js";import"./Trigger-B4vLzRfT.js";import"./slide-D1R8ir8y.js";import"./CheckOutlined-DCEeaX0q.js";import"./DownOutlined-BGr9Ccqp.js";import"./SearchOutlined-Cw4SeIMs.js";import"./move-tLDxFMn0.js";import"./collapseMotion-Brd6xpAT.js";import"./CaretDownFilled-D36rP4ZN.js";import"./responsiveObserve-BCCnUN0N.js";import"./fromPairs-Dx9PT-t0.js";import"./index-c_Ya0Lit.js";import"./LeftOutlined-DGPwWNGt.js";import"./RightOutlined-BuGpdF_a.js";import"./index-Ddj7EPU4.js";import"./dropdown-CZtNlLdq.js";import"./colors-DWh3mM8d.js";import"./index-8HS083vp.js";import"./shallowequal-C0xnIuy8.js";import"./CaretDownOutlined-By9NhBsg.js";import"./index-CaUPg-sM.js";import"./Input-BUp4aYTr.js";import"./Search-CIbInPkK.js";import"./isPlainObject-vCHOGwck.js";import"./Password-DgCvYgs_.js";const at={class:"form-modal-box"},nt={class:"form-item"},it={class:"form-content"},lt={class:"form-item"},rt={class:"form-content"},dt={key:0,class:"robot-list"},_t={class:"robot-name-text"},pt={__name:"add-sensitive-modal",props:{robotList:{type:Array,default:()=>[]}},emits:["ok"],setup(I,{expose:O,emit:c}){const M=c,f=I,x=m(!1),B=m("添加敏感词"),w=m(""),v=m(""),u=m(0),p=m([]),e=o=>{x.value=!0,w.value=o.id||"",v.value=o.words||"",u.value=+o.trigger_type||0,p.value=o.robot_ids||[]},r=o=>{p.value.includes(o.id)?p.value=p.value.filter(t=>t!==o.id):p.value.push(o.id)},k=()=>{if(!v.value)return N.error("请输入敏感词");if(u.value==1&&p.value.length==0)return N.error("请选择机器人");J({id:w.value,words:v.value,trigger_type:u.value,robot_ids:p.value.join(",")}).then(o=>{N.success(w.value?"修改成功":"添加成功"),x.value=!1,M("ok")})};return O({show:e}),(o,t)=>{const S=K,C=G,h=Z,g=H,a=T;return n(),_("div",null,[d(a,{open:x.value,"onUpdate:open":t[2]||(t[2]=i=>x.value=i),title:B.value,onOk:k,width:620},{default:l(()=>[s("div",at,[s("div",nt,[t[3]||(t[3]=s("div",{class:"form-label"},[y("敏感词"),s("span",null,"(一行一个，最多1000个敏感词)")],-1)),s("div",it,[d(S,{value:v.value,"onUpdate:value":t[0]||(t[0]=i=>v.value=i),placeholder:"请输入敏感词",style:{height:"160px"}},null,8,["value"])])]),s("div",lt,[t[6]||(t[6]=s("div",{class:"form-label"},"生效机器人",-1)),s("div",rt,[d(h,{value:u.value,"onUpdate:value":t[1]||(t[1]=i=>u.value=i)},{default:l(()=>[d(C,{value:0},{default:l(()=>t[4]||(t[4]=[y("所有机器人")])),_:1,__:[4]}),d(C,{value:1},{default:l(()=>t[5]||(t[5]=[y("指定机器人")])),_:1,__:[5]})]),_:1},8,["value"]),u.value==1?(n(),_("div",dt,[(n(!0),_(z,null,D(f.robotList,i=>(n(),_("div",{class:"checked-item",key:i.id},[d(g,{onClick:E($t=>r(i),["stop"]),checked:p.value.includes(i.id)},{default:l(()=>[s("div",_t,b(i.robot_name),1)]),_:2},1032,["onClick","checked"])]))),128))])):$("",!0)])])])]),_:1},8,["open","title"])])}}},ct=R(pt,[["__scopeId","data-v-a8be05df"]]),ut={class:"user-model-page"},mt={class:"page-title"},vt={class:"add-block"},ft={class:"list-wrapper"},kt={class:"content-box"},ht={class:"text-over-box"},gt={key:1,class:"text-over-box"},bt={key:0},yt={class:"text-over-box"},xt={key:1,class:"text-over-box"},wt=["onClick"],Ct=["onClick"],St={__name:"index",setup(I){F().query;const O=m([]),c=P({page:1,size:20,total:0}),M=e=>{c.page=e.current,c.size=e.pageSize,f()},f=()=>{V({...c}).then(e=>{let r=e.data.list||[];O.value=r.map(k=>{let o=JSON.parse(k.robot_data),t=o.map(h=>h.robot_name).join(";"),S=o.map(h=>h.id),C=k.words.split(`
`).join("；");return{...k,robot_data:o,robot_name_desc:t,robot_ids:S,words_desc:C}}),c.total=e.data.total})};f();const x=e=>{W({id:e.id}).then(r=>{f()})},B=e=>{T.confirm({title:"删除确认",icon:d(X),content:`确定要删除敏感词[${e.words_desc}]吗？`,okText:"删除",okType:"danger",cancelText:"取消",onOk(){A({id:e.id}).then(r=>{N.success("删除成功"),f()})},onCancel(){}})},w=m(null),v=(e={})=>{w.value.show(JSON.parse(JSON.stringify(e)))},u=m([]);U().then(e=>{u.value=e.data||[]});const p=[{title:"敏感词",dataIndex:"words_desc",key:"words_desc",ellipsis:!0,width:300},{title:"生效机器人",dataIndex:"robot_name_desc",key:"robot_name_desc",ellipsis:!0,width:300},{title:"是否启用",key:"status",dataIndex:"status",width:150},{title:"操作",key:"action",width:120}];return(e,r)=>{const k=Q,o=et,t=ot,S=st,C=tt,h=j;return n(),_("div",ut,[s("div",mt,[r[2]||(r[2]=y(" 敏感词管理 ")),s("div",vt,[d(k,{type:"primary",onClick:r[0]||(r[0]=g=>v()),icon:d(q(Y))},{default:l(()=>r[1]||(r[1]=[y("添加敏感词")])),_:1,__:[1]},8,["icon"])])]),s("div",ft,[d(h,null,{default:l(()=>[s("div",kt,[d(C,{columns:p,"data-source":O.value,pagination:{current:c.page,total:c.total,pageSize:c.size,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"]},onChange:M},{bodyCell:l(({column:g,record:a})=>[g.key==="words_desc"?(n(),_(z,{key:0},[a.words_desc.length>20?(n(),L(o,{key:0,overlayStyle:{"max-width":"500px"}},{title:l(()=>[y(b(a.words_desc),1)]),default:l(()=>[s("div",ht,b(a.words_desc),1)]),_:2},1024)):(n(),_("div",gt,b(a.words_desc),1))],64)):$("",!0),g.key==="robot_name_desc"?(n(),_(z,{key:1},[a.trigger_type==0?(n(),_("div",bt,"所有机器人")):(n(),_(z,{key:1},[a.robot_name_desc.length>20?(n(),L(o,{key:0,overlayStyle:{"max-width":"500px"}},{title:l(()=>[y(b(a.robot_name_desc),1)]),default:l(()=>[s("div",yt,b(a.robot_name_desc),1)]),_:2},1024)):(n(),_("div",xt,b(a.robot_name_desc),1))],64))],64)):$("",!0),g.key==="status"?(n(),L(t,{key:2,onChange:i=>x(a),checked:a.status==1,"checked-children":"开","un-checked-children":"关"},null,8,["onChange","checked"])):$("",!0),g.key==="action"?(n(),L(S,{key:3,gap:12,style:{"white-space":"nowrap"}},{default:l(()=>[s("a",{onClick:i=>v(a)},"编辑",8,wt),s("a",{onClick:i=>B(a)},"删除",8,Ct)]),_:2},1024)):$("",!0)]),_:1},8,["data-source","pagination"])])]),_:1}),d(ct,{onOk:f,robotList:u.value,ref_key:"addaddSensitiveModalRef",ref:w},null,8,["robotList"])])])}}},$e=R(St,[["__scopeId","data-v-daf9eb55"]]);export{$e as default};
