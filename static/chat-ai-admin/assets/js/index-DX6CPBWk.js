import{_ as me}from"./cu-scroll-ClwfOnpN.js";import{b as Z,e as ze,bD as Be,bK as Le,dh as Me,k as V,bW as qe,d as Ae,M as J,a1 as De,bI as Ne,E as le,B as Se}from"../../index-CfxQ5aRu.js";import{b as Oe,a5 as ee,a4 as pe,B as X,e as f,M as _,Q as b,S as l,W as i,k as a,V as Q,u as h,N as d,F as L,a6 as W,Z as ie,a7 as s,G as _e,H as se,Y as p,z as Te,a1 as he,a2 as fe,l as ke}from"./vue-chunks-BjMuQ6KD.js";import{A as Ue}from"./avatar-input-BIbxrw4C.js";import{M as re}from"./model-select-c6lAzYs5.js";import{O as je}from"./open-grapg-modal-DZKHM53P.js";import{C as Ee}from"./index-BWdnNCYH.js";import{F as ce,_ as Ve}from"./index-xqeVJHPz.js";import"./index-DcUUFn-g.js";import{I as Pe}from"./Input-C5WaaE9Z.js";import{Q as de}from"./QuestionCircleOutlined-Deh272L3.js";import{_ as Re}from"./TextArea-CN_AI7y7.js";import{_ as Ke}from"./index-BCGkuM1J.js";import{_ as Fe}from"./index-BuS_bfCI.js";import{_ as Ge}from"./index-QsoU6-T8.js";import{_ as Qe}from"./index-D8Y0HnA5.js";import{_ as We}from"./index-D1MiuDW_.js";import{i as Ye,e as He,f as Je}from"./index-OIK33vUW.js";import{A as Xe}from"./add-collaborator-CFHr-dvH.js";import{A as Ze}from"./index-DjukszQZ.js";import{P as et}from"./PlusOutlined-xiVHYVI8.js";import{U as ue}from"./UserOutlined-kSSEuP4H.js";import{C as Y}from"./CheckOutlined-BLsT0eZM.js";import{E as tt}from"./EditOutlined-COZMcG4o.js";import{E as at}from"./Password-BCnVcrNJ.js";import{D as ot}from"./DownOutlined-Gk0UBxct.js";import{_ as nt}from"./index-C-uK-k7U.js";import{a as lt}from"./index-P3IiyBCy.js";import{T as it,_ as _t}from"./index-BMYKVcHu.js";import"./pull-up.esm-JZ91zQ8P.js";import"./observe-dom.esm-DPKTicVt.js";import"./axios-Cm0UX6qg.js";import"./qs-DjdPq-RR.js";import"./crypto-js-BemCeW_6.js";import"./dayjs-DK4rpucX.js";import"./index-DqFgAaLP.js";import"./Trigger-Dy6Dc2CN.js";import"./ResizeObserver.es-B1PUzC5B.js";import"./DownloadOutlined-BrqGknZq.js";import"./collapseMotion-BH6Vz7El.js";import"./FormItemContext-DQ1b1ToO.js";import"./index-d7geF-HW.js";import"./isPlainObject-xAKL-sfk.js";import"./responsiveObserve-X1b6Czsg.js";import"./index-D6-G2N0k.js";import"./Search-DozVr2pE.js";import"./SearchOutlined-B7dGgS_P.js";import"./inputProps-D7qr__m5.js";import"./index-CXSrVsd0.js";import"./slide-BYYxYcj9.js";import"./move-BjmscfYf.js";import"./UpOutlined-CY9GinGn.js";import"./colors-C9XVGyX_.js";import"./index-DPiF7UEG.js";import"./RadioButton-_iRIgmgW.js";import"./Checkbox-DQe8ZxR1.js";import"./index-CxLzlFzW.js";import"./index-BSl1-tWC.js";import"./index-C38XHIGB.js";import"./useMaxLevel-C9fYQrQA.js";import"./CaretDownFilled-CgS0_Akm.js";import"./css-DbBMd65r.js";import"./fromPairs-Dx9PT-t0.js";import"./index-BLP-Fxny.js";import"./LeftOutlined-qzkQKHcF.js";import"./RightOutlined-BHf0iqSq.js";import"./index-CBvtIVuM.js";import"./dropdown-DsYo-imx.js";import"./index-Bx_z5H0C.js";import"./shallowequal-B6gQS78g.js";import"./CaretDownOutlined-Qu8nVykI.js";import"./pick-CoYCIHvO.js";const S=k=>(he("data-v-ae832678"),k=k(),fe(),k),st={class:"add-library-page"},rt={class:"form-box"},ct=S(()=>i("div",{class:"form-item-tip"},"请上传知识库封面，建议尺寸为100*100px.大小不超过100kb",-1));const dt=S(()=>i("div",{class:"form-item-tip"},"开启后，可以文档列表手动点击知识图谱学习生成知识图谱",-1)),ut=S(()=>i("div",{class:"form-alert-tip"},"提示：语义分段更适合没有排版过的文章，即没有明显换行符号的文本，否则更推荐使用普通分段",-1)),mt={class:"select-card-box"},pt={class:"card-title"},ht=S(()=>i("div",{class:"card-desc"}," 基于文章中句号、空行，或者自定义符号进行分段，不会消耗模型token ",-1)),ft={class:"card-title"},kt=S(()=>i("div",{class:"card-desc"}," 将文章拆分成句子后，通过语句向量相似度进行分段，会消耗模型token ",-1)),vt={class:"card-title"},gt=S(()=>i("div",{class:"card-desc"}," 将文章提交给大模型，大模型基于设定的提示词进行分段，会消耗大量模型token ",-1)),H="你是一位文章分段助手，根据文章内容的语义进行合理分段，确保每个分段表述一个完整的语义，每个分段字数控制在500字左右，最大不超过1000字。请严格按照文章内容进行分段，不要对文章内容进行加工，分段完成后输出分段后的内容。",yt={__name:"knowledge-config",setup(k){const z=ze(),$=Oe(()=>{var t;return((t=z.companyInfo)==null?void 0:t.neo4j_status)=="true"}),x=ee(),v=pe(),C=x.query,g=Le,e=X({library_name:"",library_intro:"",use_model:"",use_model_icon:"",use_model_name:"",is_offline:"",model_config_id:"",avatar:g,avatar_file:"",graph_switch:!1,graph_model_config_id:void 0,graph_use_model:"",chunk_type:1,normal_chunk_default_separators_no:[10,12],normal_chunk_default_chunk_size:512,normal_chunk_default_chunk_overlap:50,semantic_chunk_default_chunk_size:512,semantic_chunk_default_chunk_overlap:50,semantic_chunk_default_threshold:90,ai_chunk_size:5e3,ai_chunk_model:"",ai_chunk_model_config_id:"",ai_chunk_prumpt:H}),w=f(""),T=f(0),M=f({}),m=t=>{e.use_model=ve.includes(t.rawData.model_define)&&t.rawData.deployment_name?t.rawData.deployment_name:t.rawData.name,e.use_model_icon=t.icon,e.use_model_name=t.use_model_name,e.model_config_id=t.rawData.id,w.value=t.rawData.model_define,u()},y=f([]);Be().then(t=>{y.value=t.data.map(o=>({label:o.name,value:o.no}))});const q=f(!0);(()=>{Me({id:C.id}).then(t=>{M.value=t.data,T.value=M.value.is_offline?2:1,e.library_name=t.data.library_name,e.library_intro=t.data.library_intro,e.use_model=t.data.use_model,e.is_offline=t.data.is_offline,e.model_config_id=t.data.model_config_id,e.avatar=t.data.avatar?t.data.avatar:g,e.avatar_file=t.data.avatar_file?t.data.avatar_file:"",e.graph_switch=t.data.graph_switch!="0",e.graph_model_config_id=t.data.graph_model_config_id>0?t.data.graph_model_config_id:void 0,e.graph_use_model=t.data.graph_use_model,e.chunk_type=+t.data.chunk_type,e.normal_chunk_default_separators_no=t.data.normal_chunk_default_separators_no?t.data.normal_chunk_default_separators_no.split(",").map(o=>+o):[],e.normal_chunk_default_chunk_size=t.data.normal_chunk_default_chunk_size,e.normal_chunk_default_chunk_overlap=t.data.normal_chunk_default_chunk_overlap,e.semantic_chunk_default_chunk_size=t.data.semantic_chunk_default_chunk_size,e.semantic_chunk_default_chunk_overlap=t.data.semantic_chunk_default_chunk_overlap,e.semantic_chunk_default_threshold=t.data.semantic_chunk_default_threshold,e.ai_chunk_size=t.data.ai_chunk_size||5e3,e.ai_chunk_model=t.data.ai_chunk_model,e.ai_chunk_model_config_id=t.data.ai_chunk_model_config_id,e.ai_chunk_prumpt=t.data.ai_chunk_prumpt||H,q.value=t.data.type==2})})();const P=f([{iconName:"high-active",title:"高质量",value:1,is_offline:!1,desc:"使用在线的嵌入模型，在召回时具有更高的准确度，但需要花费token"}]),R=ce.useForm,K=X({library_name:[{required:!0,message:"请输入库名称",trigger:"blur"}],use_model:[{required:!0,message:"请选择嵌入模型",trigger:"change"}]}),{validateInfos:B}=R(e,K),r=t=>{e.avatar=t.imageUrl,e.avatar_file=t.file,u()},E=()=>!1,ve=["azure","ollama","xinference","openaiAgent"],ge=["azure"],te=()=>{u()},A=f([]),F=t=>{A.value=t,Te(()=>{(!e.ai_chunk_model||!Number(e.ai_chunk_model_config_id))&&ye()})},ye=()=>{if(A.value.length>0){let t=null,o=null;for(let I of A.value)if(I.model_define==="tongyi"){t=I;for(let c of t.children)if(c.name==="qwen-max"){o=c;break}break}t||(t=A.value[0],o=t.children[0]),t&&o&&(e.ai_chunk_model=o.name,e.ai_chunk_model_config_id=o.model_config_id)}},ae=f(null),be=t=>{if(t){e.graph_switch=!1;let o={graph_model_config_id:e.graph_model_config_id,graph_use_model:e.graph_use_model};if((!e.graph_model_config_id||!e.graph_use_model)&&A.value.length>0){let I=A.value[0];if(I){let c=I.children[0];o.graph_use_model=c.name,o.graph_model_config_id=c.model_config_id}}ae.value.show(o)}else e.graph_switch=!1,u()},G=t=>{e.chunk_type=t,u()},xe=t=>{t.graph_model_config_id&&(e.graph_switch=!0,e.graph_model_config_id=t.graph_model_config_id,e.graph_use_model=t.graph_use_model,u(()=>{J.confirm({title:"已开启知识图谱",content:"您可以在文档列表中点击知识图谱学习，系統将在您手动操作后开始抽取知识图谱",cancelText:"知道了",okText:"去学习",icon:ke(De,{style:{color:"#52c41a"}}),onOk:()=>v.push({path:"/library/details/knowledge-document",query:{id:C.id}})})}))},u=(t=null)=>{if(!e.library_name)return V.error("请输入知识库名称");let o={library_name:e.library_name,library_intro:e.library_intro,use_model:e.use_model,model_config_id:e.model_config_id,is_offline:e.is_offline,graph_switch:e.graph_switch?1:0,graph_model_config_id:e.graph_model_config_id,graph_use_model:e.graph_use_model,chunk_type:e.chunk_type,normal_chunk_default_separators_no:e.normal_chunk_default_separators_no.join(","),normal_chunk_default_chunk_size:e.normal_chunk_default_chunk_size,normal_chunk_default_chunk_overlap:e.normal_chunk_default_chunk_overlap,semantic_chunk_default_chunk_size:e.semantic_chunk_default_chunk_size,semantic_chunk_default_chunk_overlap:e.semantic_chunk_default_chunk_overlap,semantic_chunk_default_threshold:e.semantic_chunk_default_threshold,ai_chunk_size:e.ai_chunk_size,ai_chunk_model:e.ai_chunk_model,ai_chunk_model_config_id:e.ai_chunk_model_config_id,ai_chunk_prumpt:e.ai_chunk_prumpt,id:x.query.id};ge.indexOf(w.value)>-1&&(o.use_model="默认"),e.avatar_file&&(o.avatar=e.avatar_file),qe(o).then(I=>{typeof t=="function"?t():V.success("修改成功")})};return(t,o)=>{const I=Pe,c=Ve,oe=Re,D=Ae,Ce=Ke,we=Fe,N=Ge,U=Qe,ne=We,$e=ce,Ie=me;return _(),b(Ie,null,{default:l(()=>[i("div",st,[i("div",rt,[a($e,{"label-col":{span:5}},{default:l(()=>[a(c,Q({ref:"name",label:"知识库名称"},h(B).library_name),{default:l(()=>[a(I,{onBlur:u,value:e.library_name,"onUpdate:value":o[0]||(o[0]=n=>e.library_name=n),placeholder:"请输入知识库名称，最多20个字"},null,8,["value"])]),_:1},16),a(c,{label:"知识库简介"},{default:l(()=>[a(oe,{onBlur:u,value:e.library_intro,"onUpdate:value":o[1]||(o[1]=n=>e.library_intro=n),placeholder:"请输入知识库介绍"},null,8,["value"])]),_:1}),a(c,Q({ref:"name",label:"知识库封面"},h(B).avatar),{default:l(()=>[a(Ue,{value:e.avatar,"onUpdate:value":o[2]||(o[2]=n=>e.avatar=n),onChange:r},null,8,["value"]),ct]),_:1},16),a(c,Q({label:"嵌入模型"},h(B).use_model),{default:l(()=>[s("",!0),a(Ee,{modelValue:e.use_model,"onUpdate:modelValue":o[3]||(o[3]=n=>e.use_model=n),"label-key":"use_model_name","value-key":"value",modelType:"TEXT EMBEDDING","model-config-id":e.model_config_id,onChange:m,onLoaded:F},null,8,["modelValue","model-config-id"])]),_:1},16),_e(a(c,{label:"生成知识图谱"},{default:l(()=>[a(Ce,{onChange:be,checked:e.graph_switch,"checked-children":"开","un-checked-children":"关"},null,8,["checked"]),dt]),_:1},512),[[se,$.value]]),_e(a(c,{label:"知识图谱模型"},{default:l(()=>[a(re,{modelType:"LLM",modeName:e.graph_use_model,"onUpdate:modeName":o[4]||(o[4]=n=>e.graph_use_model=n),modeId:e.graph_model_config_id,"onUpdate:modeId":o[5]||(o[5]=n=>e.graph_model_config_id=n),style:{width:"300px"},onChange:te,onLoaded:F},null,8,["modeName","modeId"])]),_:1},512),[[se,e.graph_switch&&$.value]]),q.value?s("",!0):(_(),d(L,{key:0},[a(c,{label:"分段方式",required:""},{default:l(()=>[ut,i("div",mt,[i("div",{class:W(["select-card-item",{active:e.chunk_type==1}]),onClick:o[6]||(o[6]=n=>G(1))},[a(D,{class:"check-arrow",name:"check-arrow-filled"}),i("div",pt,[a(D,{name:"ordinary-segmentation",class:"title-icon"}),p(" 普通分段 ")]),ht],2),i("div",{class:W(["select-card-item",{active:e.chunk_type==2}]),onClick:o[7]||(o[7]=n=>G(2))},[a(D,{class:"check-arrow",name:"check-arrow-filled"}),i("div",ft,[a(D,{name:"semantic-segmentation",class:"title-icon"}),p(" 语义分段 ")]),kt],2),i("div",{class:W(["select-card-item",{active:e.chunk_type==3}]),onClick:o[8]||(o[8]=n=>G(3))},[a(D,{class:"check-arrow",name:"check-arrow-filled"}),i("div",vt,[a(D,{name:"semantic-segmentation",class:"title-icon"}),p(" AI分段 ")]),gt],2)])]),_:1}),e.chunk_type==1?(_(),d(L,{key:0},[a(c,{label:"分段标识符",required:""},{default:l(()=>[a(we,{onChange:u,value:e.normal_chunk_default_separators_no,"onUpdate:value":o[9]||(o[9]=n=>e.normal_chunk_default_separators_no=n),mode:"multiple",style:{width:"100%"},placeholder:"请选择分段标识符",options:y.value},null,8,["value","options"])]),_:1}),a(c,{label:"分段最大长度",required:""},{default:l(()=>[a(U,{gap:8,align:"center"},{default:l(()=>[a(N,{onBlur:u,value:e.normal_chunk_default_chunk_size,"onUpdate:value":o[10]||(o[10]=n=>e.normal_chunk_default_chunk_size=n),style:{width:"220px"},precision:0,min:1,max:1e5},null,8,["value"]),p(" 字符 ")]),_:1})]),_:1}),a(c,{label:"分段重叠长度"},{default:l(()=>[a(U,{gap:8,align:"center"},{default:l(()=>[a(N,{onBlur:u,value:e.normal_chunk_default_chunk_overlap,"onUpdate:value":o[11]||(o[11]=n=>e.normal_chunk_default_chunk_overlap=n),style:{width:"220px"},precision:0,min:1,max:1e5},null,8,["value"]),p(" 字符 ")]),_:1})]),_:1})],64)):s("",!0),e.chunk_type==2?(_(),d(L,{key:1},[e.chunk_type==2?(_(),b(c,{key:0,required:""},{label:l(()=>[p(" 分段阈值 "),a(ne,null,{title:l(()=>[p("用于控制分段拆分的标准，数值0~100,数值越大，分段越少，数值越小，分段越多。")]),default:l(()=>[a(h(de),{style:{cursor:"pointer","margin-left":"2px"}})]),_:1})]),default:l(()=>[a(N,{onBlur:u,value:e.semantic_chunk_default_threshold,"onUpdate:value":o[12]||(o[12]=n=>e.semantic_chunk_default_threshold=n),style:{width:"100%"},placeholder:"请输入分段阈值",precision:0,min:0,max:100},null,8,["value"])]),_:1})):s("",!0),a(c,{label:"分段最大长度",required:""},{default:l(()=>[a(U,{gap:8,align:"center"},{default:l(()=>[a(N,{onBlur:u,value:e.semantic_chunk_default_chunk_size,"onUpdate:value":o[13]||(o[13]=n=>e.semantic_chunk_default_chunk_size=n),style:{width:"220px"},precision:0,min:1,max:1e5},null,8,["value"]),p(" 字符 ")]),_:1})]),_:1}),a(c,{label:"分段重叠长度"},{default:l(()=>[a(U,{gap:8,align:"center"},{default:l(()=>[a(N,{onBlur:u,value:e.semantic_chunk_default_chunk_overlap,"onUpdate:value":o[14]||(o[14]=n=>e.semantic_chunk_default_chunk_overlap=n),style:{width:"220px"},precision:0,min:1,max:1e5},null,8,["value"]),p(" 字符 ")]),_:1})]),_:1})],64)):s("",!0),e.chunk_type==3?(_(),d(L,{key:2},[e.chunk_type==3?(_(),b(c,{key:0,required:""},{label:l(()=>[p(" AI大模型 ")]),default:l(()=>[a(re,{modelType:"LLM",placeholder:"请选择AI大模型",modeName:e.ai_chunk_model,"onUpdate:modeName":o[15]||(o[15]=n=>e.ai_chunk_model=n),modeId:e.ai_chunk_model_config_id,"onUpdate:modeId":o[16]||(o[16]=n=>e.ai_chunk_model_config_id=n),style:{width:"300px"},onChange:te,onLoaded:F},null,8,["modeName","modeId"])]),_:1})):s("",!0),a(c,{label:"提示词设置",required:""},{default:l(()=>[a(U,{gap:8,align:"center"},{default:l(()=>[a(oe,{onBlur:u,maxLength:500,style:{height:"80px"},value:e.ai_chunk_prumpt,"onUpdate:value":o[17]||(o[17]=n=>e.ai_chunk_prumpt=n),placeholder:H},null,8,["value"])]),_:1})]),_:1}),a(c,null,{label:l(()=>[p(" 单次最大字符数 "),a(ne,null,{title:l(()=>[p("由于大模型支持的上下文数量有限制，如果上传的文档较大，会按照最大字符数先拆分成多个分段，再提交给大模型进行分段。")]),default:l(()=>[a(h(de),{style:{cursor:"pointer","margin-left":"2px"}})]),_:1})]),default:l(()=>[a(N,{onBlur:u,class:"form-item-inptu-numbner",value:e.ai_chunk_size,"onUpdate:value":o[18]||(o[18]=n=>e.ai_chunk_size=n),placeholder:"请输入单次最大字符数",precision:0,min:0,formatter:n=>parseInt(n),parser:n=>parseInt(n)},null,8,["value","formatter","parser"]),p(" 字符 ")]),_:1})],64)):s("",!0)],64))]),_:1})]),a(je,{onOk:xe,ref_key:"openGrapgModalRef",ref:ae},null,512)])]),_:1})}}},bt=Z(yt,[["__scopeId","data-v-ae832678"]]),O=k=>(he("data-v-b9e9bce7"),k=k(),fe(),k),xt={class:"content-box"},Ct={key:0,class:"add-btn-block"},wt={class:"list-content"},$t={key:0,class:"user-block"},It={class:"name-box"},zt={class:"name"},Bt={class:"remark-text"},Lt={key:0,class:"hover-btn-box"},Mt={key:0},qt={key:1},At={key:2},Dt={key:1,class:"hover-btn-box"},Nt={class:"role-menu-box"},St=["onClick"],Ot={class:"menu-header"},Tt=O(()=>i("span",{class:"title"},"管理",-1)),Ut=O(()=>i("div",{class:"desc"},"可编辑，可删除，可查看",-1)),jt={key:0,class:"check-box"},Et=["onClick"],Vt={class:"menu-header"},Pt=O(()=>i("span",{class:"title"},"编辑",-1)),Rt=O(()=>i("div",{class:"desc"},"可编辑，可查看",-1)),Kt={key:0,class:"check-box"},Ft=["onClick"],Gt={class:"menu-header"},Qt=O(()=>i("span",{class:"title"},"查看",-1)),Wt=O(()=>i("div",{class:"desc"},"仅查看",-1)),Yt={key:0,class:"check-box"},Ht={class:"hover-btn-box"},Jt={key:0},Xt={key:1},Zt={key:2},ea=["onClick"],ta={__name:"role-permission",setup(k){const z=ee().query,$=f(Ne(z.id)),x=f([]),v=X({object_id:z.id,object_type:2}),C=()=>{Ye({...v}).then(m=>{let y=m.data||[];x.value=y})};C();const g=f(null),e=()=>{g.value.show(x.value,[{object_id:+z.id,object_type:2,operate_rights:4}])},w=(m,y)=>{let q=y==4?"管理":y==2?"编辑":"查看";J.confirm({title:"提示?",icon:a(le),content:"确认修改该协作者权限为【"+q+"】",okText:"确认",cancelText:"取消",onOk:()=>{let j=[{object_id:+m.object_id,object_type:+m.object_type,operate_rights:+y}];He({identity_ids:m.identity_id,identity_type:m.identity_type,object_array:JSON.stringify(j)}).then(P=>{V.success("修改成功"),C()})},onCancel(){}})},T=m=>{J.confirm({title:"提示?",icon:a(le),content:"确认删除该条数据",okText:"确认",okType:"danger",cancelText:"取消",onOk:()=>{Je({identity_id:m.identity_id,identity_type:m.identity_type,object_id:m.object_id,object_type:m.object_type}).then(y=>{V.success("删除成功"),C()})},onCancel(){}})},M=f([{title:"姓名",dataIndex:"name",key:"name"},{title:"权限",dataIndex:"operate_rights",key:"operate_rights"},{title:"操作",dataIndex:"action",key:"action",width:80}]);return(m,y)=>{const q=Se,j=Ze,P=nt,R=lt,K=me;return _(),b(K,null,{default:l(()=>[i("div",xt,[$.value==4?(_(),d("div",Ct,[a(q,{type:"primary",onClick:e,icon:ke(h(et))},{default:l(()=>[p("添加协助者")]),_:1},8,["icon"])])):s("",!0),i("div",wt,[a(R,{columns:M.value,"data-source":x.value,pagination:!1},{bodyCell:l(({column:B,record:r})=>[B.key==="name"?(_(),d("div",$t,[a(j,{shape:"square",src:r.avatar,size:40},{icon:l(()=>[r.avatar?s("",!0):(_(),b(h(ue),{key:0}))]),_:2},1032,["src"]),i("div",It,[i("div",zt,ie(r.user_name),1),i("div",Bt,ie(r.name),1)])])):s("",!0),B.key==="operate_rights"?(_(),d(L,{key:1},[$.value==2?(_(),d("div",Lt,[r.operate_rights==4?(_(),d("span",Mt,"管理")):s("",!0),r.operate_rights==2?(_(),d("span",qt,"编辑")):s("",!0),r.operate_rights==1?(_(),d("span",At,"查看")):s("",!0)])):r.role_type==1||r.is_creator==1?(_(),d("div",Dt,"管理")):(_(),b(P,{key:2,placement:"bottomRight",title:null,overlayInnerStyle:{padding:"2px"}},{content:l(()=>[i("div",Nt,[i("div",{class:"role-menu",onClick:E=>w(r,4)},[i("div",Ot,[a(h(ue)),Tt]),Ut,r.operate_rights==4?(_(),d("div",jt,[a(h(Y))])):s("",!0)],8,St),i("div",{class:"role-menu",onClick:E=>w(r,2)},[i("div",Vt,[a(h(tt)),Pt]),Rt,r.operate_rights==2?(_(),d("div",Kt,[a(h(Y))])):s("",!0)],8,Et),i("div",{class:"role-menu",onClick:E=>w(r,1)},[i("div",Gt,[a(h(at)),Qt]),Wt,r.operate_rights==1?(_(),d("div",Yt,[a(h(Y))])):s("",!0)],8,Ft)])]),default:l(()=>[i("div",Ht,[r.operate_rights==4?(_(),d("span",Jt,"管理")):s("",!0),r.operate_rights==2?(_(),d("span",Xt,"编辑")):s("",!0),r.operate_rights==1?(_(),d("span",Zt,"查看")):s("",!0),a(h(ot))])]),_:2},1024))],64)):s("",!0),B.key==="action"?(_(),d(L,{key:2},[$.value==4?(_(),d(L,{key:0},[r.role_type!=1&&r.is_creator!=1?(_(),d("a",{key:0,onClick:E=>T(r)},"移除",8,ea)):s("",!0)],64)):s("",!0)],64)):s("",!0)]),_:1},8,["columns","data-source"])])]),a(Xe,{onOk:C,ref_key:"addCollaboratorRef",ref:g},null,512)]),_:1})}}},aa=Z(ta,[["__scopeId","data-v-b9e9bce7"]]),oa={class:"page-container-box"},na={class:"content-box"},la={__name:"index",setup(k){const z=ee(),$=pe(),x=z.query,v=f(+x.activeKey||1),C=()=>{let g={...x};v.value>1?g.activeKey=v.value:delete g.activeKey,$.push({query:{...g}})};return(g,e)=>{const w=_t,T=it;return _(),d("div",oa,[a(T,{activeKey:v.value,"onUpdate:activeKey":e[0]||(e[0]=M=>v.value=M),onChange:C},{default:l(()=>[(_(),b(w,{key:1,tab:"知识库配置"})),(_(),b(w,{key:2,tab:"角色权限"}))]),_:1},8,["activeKey"]),i("div",na,[v.value==1?(_(),b(bt,{key:0})):s("",!0),v.value==2?(_(),b(aa,{key:1})):s("",!0)])])}}},zo=Z(la,[["__scopeId","data-v-82daa59a"]]);export{zo as default};
