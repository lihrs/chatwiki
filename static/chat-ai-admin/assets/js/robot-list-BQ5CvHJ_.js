import{b as U,l as j,B as G,aw as K,ax as W,d as q,ay as X,k,M as R,E as h}from"../../index-CvfGQnmW.js";import{d as u,b as A,q as Z,N as y,X as e,j as s,U as n,S as z,a6 as H,F as J,a1 as Q,a2 as Y,O as m,a0 as r,Z as oo,u as C,_ as g}from"./vue-chunks-BRsu9_To.js";import{g as to,c as eo,r as so}from"./index-8-RdvZT5.js";import{A as no}from"./add-robot-alert-DtvnvdFh.js";import{_ as io}from"./page-alert-D3-3uqYj.js";import{L as ao}from"./list-tabs-MfhK9lx3.js";import"./index-XnBLv09r.js";import{D as lo}from"./dropdown-JwPNtE5e.js";import{P as ro}from"./PlusOutlined-BsYDRa8m.js";import{M as co,_ as po}from"./index-Cn6_tPQQ.js";import{_ as _o}from"./index-B-ykUzgY.js";import"./axios-Dq7h7Pqt.js";import"./qs-BrxkIg-9.js";import"./crypto-js-ClNpte_9.js";import"./dayjs-B6IotFah.js";import"./index-CiT4vUhP.js";import"./index-CeLDnZbi.js";import"./Trigger-C5a0DMKm.js";import"./ResizeObserver.es-B1PUzC5B.js";import"./isPlainObject-C_BoBcyP.js";import"./responsiveObserve-4wudV-W8.js";import"./collapseMotion-Brd6xpAT.js";import"./QuestionCircleOutlined-DsT-V90y.js";import"./FormItemContext-CFzzmp00.js";import"./index-Dktj88pM.js";import"./Password-Bl0n4Nu8.js";import"./Input-DT-w6V-X.js";import"./index-B0doyz59.js";import"./inputProps-DJXIqADS.js";import"./DownloadOutlined-D6_CmJ5K.js";import"./CheckOutlined-N7bppPAu.js";import"./robot-CVYMQ0Uf.js";import"./index-DUS5CIPm.js";import"./Search-BVbdzfe3.js";import"./SearchOutlined-B9P7O4A9.js";import"./TextArea-B40Dha8W.js";import"./index-DaOSj_2K.js";import"./RightOutlined-DQOW11d0.js";import"./move-CunrTozH.js";import"./slide-vrDadJH3.js";import"./colors-Cy2bPHOW.js";import"./shallowequal-C0xnIuy8.js";const uo={class:"robot-page"},mo={class:"list-toolbar"},bo={class:"toolbar-box"},vo={class:"toolbar-box"},fo={class:"create-action"},ko=["src"],yo={class:"create-action"},Co=["src"],go={class:"list-box"},$o=["onClick"],wo={class:"list-item"},xo={class:"robot-info"},To=["src"],Ro={class:"robot-info-content"},ho={class:"robot-name"},Ao={class:"robot-type-tag"},Bo={class:"robot-desc"},Po=["onClick"],Lo=["onClick"],Oo=["onClick"],No=["onClick"],Do=["onClick"],Eo={__name:"robot-list",setup(Mo){const $=u([{title:"全部 (0)",value:"2"},{title:"聊天机器人 (0)",value:"0"},{title:"工作流 (0)",value:"1"}]),B=j();let{role_permission:P}=B;const L=A(()=>P.includes("RobotCreate"));Y();const p=u("2"),b=u([]),O=A(()=>p.value==2?b.value:b.value.filter(t=>t.application_type==p.value)),v=()=>{to().then(t=>{let o=0,a=0,l=0;t.data.forEach(c=>{c.application_type==0?a++:l++,o++}),$.value=[{title:"全部 ("+o+")",value:"2"},{title:"聊天机器人 ("+a+")",value:"0"},{title:"工作流 ("+l+")",value:"1"}],b.value=t.data}).catch(()=>{})},w=u(null),x=t=>{w.value.open(t)},N=({id:t,robot_key:o,application_type:a})=>{a==0?window.open(`/#/robot/config/basic-config?id=${t}&robot_key=${o}`,"_blank","noopener"):window.open(`/#/robot/config/workflow?id=${t}&robot_key=${o}`,"_blank","noopener")},D=t=>{if(X(t.id)!=4)return k.error("您没有删除机器人的权限");let a=3,l=R.confirm({title:`删除机器人${t.robot_name}`,icon:s(h),content:"您确定要删除此机器人吗？",okText:a+" 确 定",okType:"danger",cancelText:"取 消",okButtonProps:{disabled:!0},onOk(){E(t)},onCancel(){}}),c=setInterval(()=>{a==1?(l.update({okText:"确 定",okButtonProps:{disabled:!1}}),clearInterval(c),c=void 0):(a-=1,l.update({okText:a+" 确 定",okButtonProps:{disabled:!0}}))},1e3)},E=({id:t})=>{eo({id:t}).then(()=>{k.success("删除成功"),v()})},M=t=>{let o=3,a=R.confirm({title:`复制机器人${t.robot_name}`,icon:s(h),content:"您确定要复制此机器人吗？",okText:o+" 确 定",okType:"danger",cancelText:"取 消",okButtonProps:{disabled:!0},onOk(){V(t)},onCancel(){}}),l=setInterval(()=>{o==1?(a.update({okText:"确 定",okButtonProps:{disabled:!1}}),clearInterval(l),l=void 0):(o-=1,a.update({okText:o+" 确 定",okButtonProps:{disabled:!0}}))},1e3)},V=({id:t})=>{so({id:t}).then(()=>{k.success("复制成功"),v()})},F=t=>{window.open(`#/robot/test?robot_key=${t.robot_key}&id=${t.id}`)},I=t=>{window.open(`#/robot/config/session-record?robot_key=${t.robot_key}&id=${t.id}`)},S=t=>{window.open(`#/robot/config/statistical_analysis?robot_key=${t.robot_key}&id=${t.id}`)};return Z(()=>{v()}),(t,o)=>{const a=G,l=po,c=co,T=lo,_=q,f=_o;return m(),y("div",uo,[o[10]||(o[10]=e("h3",{class:"page-title"},"应用",-1)),s(io,{class:"mb-16",title:"使用说明"},{default:n(()=>o[6]||(o[6]=[e("div",null,[e("p",null," 1、应用包括两种类型：聊天机器人、工作流。聊天机器人适合新手用户，关联知识库后只需简单配置，即可创建一个基于私有知识库的问答机器人。工作流适合高级用户，利用系统预制节点自定义任务流程，适合解决复杂任务。 "),e("p",null,"2、发现模块也提供了丰富模版，可以根据需要选择适合模版快速创建应用。")],-1)])),_:1,__:[6]}),e("div",mo,[e("div",bo,[s(ao,{tabs:$.value,value:p.value,"onUpdate:value":o[0]||(o[0]=i=>p.value=i)},null,8,["tabs","value"])]),e("div",vo,[L.value?(m(),z(T,{key:0},{overlay:n(()=>[s(c,null,{default:n(()=>[s(l,{onClick:o[2]||(o[2]=r(i=>x(0),["prevent"]))},{default:n(()=>[e("span",fo,[e("img",{class:"icon",src:C(K),alt:""},null,8,ko),o[8]||(o[8]=e("span",null,"聊天机器人",-1))])]),_:1}),s(l,{onClick:o[3]||(o[3]=r(i=>x(1),["prevent"]))},{default:n(()=>[e("span",yo,[e("img",{class:"icon",src:C(W),alt:""},null,8,Co),o[9]||(o[9]=e("span",null,"工作流",-1))])]),_:1})]),_:1})]),default:n(()=>[s(a,{type:"primary",onClick:o[1]||(o[1]=r(()=>{},["prevent"]))},{icon:n(()=>[s(C(ro))]),default:n(()=>[o[7]||(o[7]=oo(" 创建应用 "))]),_:1,__:[7]})]),_:1})):H("",!0)])]),e("div",go,[(m(!0),y(J,null,Q(O.value,i=>(m(),y("div",{class:"list-item-wrapper",key:i.id,onClick:d=>N(i)},[e("div",wo,[e("div",xo,[e("img",{class:"robot-avatar",src:i.robot_avatar,alt:""},null,8,To),e("div",Ro,[e("div",ho,g(i.robot_name),1),e("div",Ao,g(i.application_type==0?"聊天机器人":"工作流"),1)])]),e("div",Bo,g(i.robot_intro),1),e("div",{class:"robot-action",onClick:o[5]||(o[5]=r(()=>{},["stop"]))},[s(f,{title:"聊天测试"},{default:n(()=>[e("div",{class:"robot-action-item",onClick:r(d=>F(i),["stop"])},[s(_,{class:"action-icon",name:"chat"})],8,Po)]),_:2},1024),s(f,{title:"会话记录"},{default:n(()=>[e("div",{class:"robot-action-item",onClick:r(d=>I(i),["stop"])},[s(_,{class:"action-icon",name:"session"})],8,Lo)]),_:2},1024),s(f,{title:"统计分析"},{default:n(()=>[e("div",{class:"robot-action-item",onClick:r(d=>S(i),["stop"])},[s(_,{class:"action-icon",name:"analysis"})],8,Oo)]),_:2},1024),s(T,null,{overlay:n(()=>[s(c,null,{default:n(()=>[s(l,null,{default:n(()=>[e("a",{class:"delete-text-color",href:"javascript:;",onClick:d=>D(i)},"删 除",8,No)]),_:2},1024),s(l,null,{default:n(()=>[e("a",{class:"copy-text-color",href:"javascript:;",onClick:d=>M(i)},"复 制",8,Do)]),_:2},1024)]),_:2},1024)]),default:n(()=>[e("div",{class:"robot-action-item",onClick:o[4]||(o[4]=r(()=>{},["stop"]))},[s(_,{class:"action-icon",name:"point-h"})])]),_:2},1024)])])],8,$o))),128))]),s(no,{ref_key:"addRobotAlertRef",ref:w},null,512)])}}},Tt=U(Eo,[["__scopeId","data-v-04466093"]]);export{Tt as default};
