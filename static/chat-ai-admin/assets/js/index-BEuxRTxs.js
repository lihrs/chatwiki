import{b as h,a3 as j,w as A,N as l,O as a,X as o,F as C,a1 as D,a6 as S,u as f,a5 as G,j as e,_ as k,a2 as H,S as x,U as i,Z as T,a7 as E,d as M,q as K,D as W,a8 as X,a0 as Y,z as B,W as F,G as Z,V as J,Y as U}from"./vue-chunks-BRsu9_To.js";import{b as w,j as Q,d as O,h as P,f as ee,R as te,M as oe,r as se,k as ae}from"../../index-5YmK49PT.js";import{L as re}from"./layout-logo-Ckje79tE.js";import{_ as ne,B as le}from"./index-eWRuUZfn.js";import{M as ie,_ as ce}from"./index-8HS083vp.js";import"./index-Ddj7EPU4.js";import{D as ue}from"./dropdown-CZtNlLdq.js";import{v as _e}from"./validate-8MtiUsxW.js";import{F as N,_ as pe}from"./index-CgExRH-D.js";import{_ as de}from"./index-B9uthI5P.js";import{_ as me}from"./Password-DgCvYgs_.js";import"./index-CaUPg-sM.js";import"./axios-Dq7h7Pqt.js";import"./qs-BrxkIg-9.js";import"./crypto-js-ClNpte_9.js";import"./dayjs-B6IotFah.js";import"./DownOutlined-BGr9Ccqp.js";import"./shallowequal-C0xnIuy8.js";import"./Trigger-B4vLzRfT.js";import"./ResizeObserver.es-B1PUzC5B.js";import"./collapseMotion-Brd6xpAT.js";import"./slide-D1R8ir8y.js";import"./index-D-Ceyk84.js";import"./index-BlLboPxR.js";import"./colors-DWh3mM8d.js";import"./RightOutlined-BuGpdF_a.js";import"./move-tLDxFMn0.js";import"./isPlainObject-vCHOGwck.js";import"./responsiveObserve-BCCnUN0N.js";import"./QuestionCircleOutlined-B1NoWbnW.js";import"./FormItemContext-CEomr4ey.js";import"./Input-BUp4aYTr.js";import"./index-DKf75RQ4.js";import"./inputProps-DdSvkSVM.js";import"./Search-CIbInPkK.js";import"./SearchOutlined-Cw4SeIMs.js";import"./TextArea-srALwtoG.js";const ve={class:"navbar-wrapper"},he={class:"navbar"},fe=["onClick"],ye={class:"nav-name"},be={__name:"layout-navbar",setup(y){const t=H(),r=j(),c=h(()=>r.meta.activeMenu||""),u=h(()=>r.path.split("/")[1]),m=[{id:1,key:"robot",label:"robot",title:"应用",icon:"nav-robot",path:"/robot/list",permission:["RobotManage"]},{id:2,key:"library",label:"library",title:"知识库",icon:"nav-library",path:"/library/list",permission:["LibraryManage"]},{id:3,key:"PublicLibrary",label:"PublicLibrary",title:"文档",icon:"nav-doc",path:"/public-library/list",permission:["*:*:*"]},{id:4,key:"library-search",label:"library-search",title:"搜索",icon:"search",path:"/library-search/index",permission:["LibrarySearch"]},{id:5,key:"chat-monitor",label:"chat-monitor",title:"会话",icon:"nav-chat",path:"/chat-monitor/index",permission:["*:*:*"]}],n=_=>{t.push(_.path)};return A(()=>r.path,()=>{},{immediate:!0}),(_,p)=>{const v=O;return a(),l("div",ve,[o("div",he,[(a(),l(C,null,D(m,s=>(a(),l(C,null,[f(Q)(s.permission)?(a(),l("div",{class:G(["nav-menu",{active:s.key===u.value||s.key===c.value}]),key:s.key,onClick:g=>n(s)},[e(v,{class:"nav-icon",name:s.icon},null,8,["name"]),o("span",ye,k(s.title),1)],10,fe)):S("",!0)],64))),64))])])}}},ke=w(be,[["__scopeId","data-v-737d3aa5"]]),we={class:"layout-breadcrumb"},ge={key:1,class:"page-title"},$e={__name:"layout-breadcrumb",props:{title:{type:[String,Boolean],default:""},items:{type:[Array,Boolean],default:()=>[]}},setup(y){const t=y;return(r,c)=>{const u=E("router-link"),m=ne,n=le;return a(),l("div",we,[t.items.length>0?(a(),x(n,{key:0},{default:i(()=>[(a(!0),l(C,null,D(t.items,(_,p)=>(a(),l(C,{key:_.title},[p!==t.items.length-1?(a(),x(m,{key:0},{default:i(()=>[e(u,{to:_.path},{default:i(()=>[T(k(_.title),1)]),_:2},1032,["to"])]),_:2},1024)):(a(),x(m,{key:1},{default:i(()=>[T(k(_.title),1)]),_:2},1024))],64))),128))]),_:1})):(a(),l("div",ge,k(t.title),1))])}}},xe=w($e,[["__scopeId","data-v-c69a461d"]]),Ce={class:"layout-footer"},Se={class:"copyright-text"},Pe={__name:"layout-footer",setup(y){const t=P(),{t:r}=ee(),c=M(null);return K(()=>{c.value=setInterval(()=>{setTimeout(()=>{t.refreshToken()},0)},te)}),W(()=>{clearInterval(c.value),c.value=null}),(u,m)=>(a(),l("div",Ce,[o("div",Se,k(f(r)("common.copyright")),1)]))}},Ie=w(Pe,[["__scopeId","data-v-ab337acb"]]),Me={key:0,class:"user-dropdown"},Re=["src"],Le={class:"user-name"},Te={__name:"user-dropdown",setup(y){const t=P(),{userInfo:r,avatar:c,user_name:u}=X(t),m=()=>{t.logoutConfirm(!0)},n=()=>{window.open("/#/user/model","_blank","noopener")};return(_,p)=>{const v=O,s=ce,g=ie,b=ue;return f(r)?(a(),l("div",Me,[e(b,null,{overlay:i(()=>[e(g,null,{default:i(()=>[e(s,null,{default:i(()=>[o("a",{class:"menu-item",href:"javascript:;",onClick:n},[e(v,{class:"menu-icon",name:"system-setting"}),p[1]||(p[1]=o("span",{class:"menu-name"},"系统管理",-1))])]),_:1}),e(s,null,{default:i(()=>[o("a",{class:"menu-item",href:"javascript:;",onClick:m},[e(v,{class:"menu-icon",name:"logout"}),p[2]||(p[2]=o("span",{class:"menu-name"},"退出登录",-1))])]),_:1})]),_:1})]),default:i(()=>[o("div",{class:"user-dropdown-link",onClick:p[0]||(p[0]=Y(()=>{},["prevent"]))},[o("img",{class:"user-avatar",src:f(c),alt:""},null,8,Re),o("span",Le,k(f(u)),1),e(v,{name:"arrow-down",style:{"font-size":"16px",color:"#8c8c8c"}})])]),_:1})])):S("",!0)}}},Be=w(Te,[["__scopeId","data-v-18e51def"]]),Fe={class:"form-box"},Ue={__name:"reset-password",setup(y,{expose:t}){const r=P(),c=N.useForm,u=M(!0),m=M("重置登录密码"),n=B({password:"",check_password:"",id:r.userInfo.user_id}),_=B({password:[{message:"请输入登录密码",required:!0},{validator:async(I,d)=>!_e(d)&&d?Promise.reject("密码必须包含字母、数字或者字符中的两种，6-32位"):Promise.resolve()}],check_password:[{message:"请输入确认密码",required:!0},{validator:async(I,d)=>d!=n.password&&d?Promise.reject("两次输入的密码不一致"):Promise.resolve()}]}),{resetFields:p,validate:v,validateInfos:s}=c(n,_),g=()=>{v().then(()=>{se({...Z(n)}).then(I=>{ae.success("修改成功"),u.value=!1,r.reset(!0)})})},b=()=>{r.setResetPassModal()};return t({open}),(I,d)=>{const V=de,R=me,L=pe,z=N,q=oe;return a(),l("div",null,[e(q,{open:u.value,"onUpdate:open":d[2]||(d[2]=$=>u.value=$),title:m.value,onOk:g,width:"520px",onCancel:b},{default:i(()=>[e(V,{class:"alert-box",message:"您还未修改初始密码，为了保障您的数据安全，请您尽快重置密码。",type:"info","show-icon":""}),o("div",Fe,[e(z,{layout:"vertical"},{default:i(()=>[e(L,F({label:"登录密码"},f(s).password),{default:i(()=>[e(R,{value:n.password,"onUpdate:value":d[0]||(d[0]=$=>n.password=$),placeholder:"密码必须包含字母、数字或者字符中的两种，6-32位"},null,8,["value"])]),_:1},16),e(L,F({label:"确认密码"},f(s).check_password),{default:i(()=>[e(R,{value:n.check_password,"onUpdate:value":d[1]||(d[1]=$=>n.check_password=$),placeholder:"请重新输入密码"},null,8,["value"])]),_:1},16)]),_:1})])]),_:1},8,["open","title"])])}}},Ne=w(Ue,[["__scopeId","data-v-9de4c189"]]),je={class:"admin-layout"},De={class:"layout-header-wrapper"},Ee={class:"layout-header"},Oe={class:"header-left"},Ve={class:"header-body"},ze={class:"header-right"},qe={class:"item-box"},Ae={class:"layout-body"},Ge={key:0,class:"layout-breadcrumb-wrapper"},He={class:"layout-footer-wrapper"},Ke={__name:"index",setup(y){const t=j(),r=P(),c=h(()=>t.meta.isCustomPage||!1),u=h(()=>t.meta.pageStyle||{}),m=h(()=>t.meta.bgColor||"#ffffff"),n=h(()=>t.meta.breadcrumb||[]),_=h(()=>t.meta.hideTitle||!1),p=h(()=>t.meta.title||!1),v=h(()=>{var s;return((s=r.userInfo)==null?void 0:s.d_pass)==1&&r.isShowResetPassModal});return(s,g)=>{const b=E("router-view");return a(),l("div",je,[o("div",De,[o("div",Ee,[o("div",Oe,[e(re)]),o("div",Ve,[e(ke)]),o("div",ze,[o("div",qe,[e(Be)])])])]),o("div",Ae,[c.value?J(s.$slots,"default",{key:0},()=>[e(b)],!0):(a(),l("div",{key:1,class:"page-wrapper",style:U({"background-color":m.value})},[_.value?S("",!0):(a(),l("div",Ge,[e(xe,{items:n.value,title:p.value},null,8,["items","title"])])),o("div",{class:"page-container",style:U({...u.value})},[e(b)],4)],4))]),o("div",He,[e(Ie)]),v.value?(a(),x(Ne,{key:0})):S("",!0)])}}},Lt=w(Ke,[["__scopeId","data-v-9ab7d68c"]]);export{Lt as default};
