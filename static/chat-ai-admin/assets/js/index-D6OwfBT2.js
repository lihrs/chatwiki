import{_ as ot}from"./cu-scroll-CSP3phOX.js";import{I as kt,M as F,am as yt,k as T,b as Z,B as Y,an as $t,ao as xt,ap as Ct,E as it,aq as tt,d as at,ar as St,as as jt,at as Ot,au as Lt,av as wt,aw as It}from"../../index-CRscgXfx.js";import{j as o,z as K,d as h,N as d,O as i,U as n,X as t,Z as U,k as et,u as g,F as A,a1 as H,a5 as Ut,a6 as G,S as R,_ as l,a0 as Pt,a3 as Mt,x as At}from"./vue-chunks-BRsu9_To.js";import{F as pt,_ as ct}from"./index-V4Jlr1g1.js";import"./index-CuQqX42V.js";import{I as st}from"./Input-tyEnRv5y.js";import{_ as dt}from"./TextArea-K98swN5P.js";import{P as nt}from"./PlusOutlined-Bx_uxzSh.js";import{E as ut,M as _t,_ as mt}from"./index-SJnDd6Rt.js";import"./index-BlBVtNBL.js";import{D as vt}from"./dropdown-BHoAAsqQ.js";import{_ as ht}from"./index-1HwKIEyy.js";import{M as Dt}from"./model-select-CQGFKGZX.js";import{T as Nt}from"./index-CWReAPxQ.js";import{S as ft}from"./index-BJIaPIed.js";import{S as bt,a as gt}from"./index-CVagTbWa.js";import{D as Et}from"./DownOutlined-h1NhriVT.js";import{U as Gt}from"./UpOutlined-DO_UwGzj.js";import{E as Tt}from"./EditOutlined-B9yelt61.js";import{_ as Ht}from"./index-xhWJls0Z.js";import"./pull-up.esm-D94Swpvl.js";import"./observe-dom.esm-CyCedSm-.js";import"./axios-Dq7h7Pqt.js";import"./qs-BrxkIg-9.js";import"./crypto-js-ClNpte_9.js";import"./dayjs-B6IotFah.js";import"./Trigger-D-LMK5CQ.js";import"./ResizeObserver.es-B1PUzC5B.js";import"./isPlainObject-DRl1_5Z2.js";import"./responsiveObserve-B2v9U3jv.js";import"./collapseMotion-Brd6xpAT.js";import"./QuestionCircleOutlined-DKLyIfpc.js";import"./FormItemContext-DiOlYi_l.js";import"./index-BbckQ73x.js";import"./Search-Dt3FbMlF.js";import"./SearchOutlined-CoZBl7jN.js";import"./inputProps-QKn333yB.js";import"./Password-Bmz-BBqy.js";import"./index-CxTVzuqL.js";import"./shallowequal-C0xnIuy8.js";import"./slide-Cad5dMPr.js";import"./RightOutlined-lY7LuswZ.js";import"./move-l5WLgE3F.js";import"./colors-GzwEvaOH.js";import"./index-C6-J9yG8.js";import"./index-4jv__AnP.js";import"./CheckOutlined-BnY3VuYw.js";var Rt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-600 72h560v208H232V136zm560 480H232V408h560v208zm0 272H232V680h560v208zM304 240a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"database",theme:"outlined"};function rt(w){for(var f=1;f<arguments.length;f++){var k=arguments[f]!=null?Object(arguments[f]):{},y=Object.keys(k);typeof Object.getOwnPropertySymbols=="function"&&(y=y.concat(Object.getOwnPropertySymbols(k).filter(function(_){return Object.getOwnPropertyDescriptor(k,_).enumerable}))),y.forEach(function(_){zt(w,_,k[_])})}return w}function zt(w,f,k){return f in w?Object.defineProperty(w,f,{value:k,enumerable:!0,configurable:!0,writable:!0}):w[f]=k,w}var lt=function(f,k){var y=rt({},f,k.attrs);return o(kt,rt({},y,{icon:Rt}),null)};lt.displayName="DatabaseOutlined";lt.inheritAttrs=!1;const Vt={__name:"add-group",emits:["ok"],setup(w,{expose:f,emit:k}){const y=k,_=K({id:"",group_name:"",group_desc:""}),$=h(!1),L=h("新建分组"),s=h(!1),S=h(null),D=(b={})=>{S.value&&S.value.resetFields(),_.group_name=b.group_name||"",_.group_desc=b.group_desc||"",_.id=b.id||"",L.value=b.id?"编辑分组":"新建分组",s.value=!0},m=()=>{S.value.validate().then(()=>{yt({..._}).then(()=>{y("ok"),T.success(`${L.value}成功`),s.value=!1})})};return f({show:D}),(b,x)=>{const P=st,p=ct,E=dt,M=pt,v=F;return i(),d("div",null,[o(v,{open:s.value,"onUpdate:open":x[2]||(x[2]=I=>s.value=I),"confirm-loading":$.value,title:L.value,width:"476px",onOk:m},{default:n(()=>[o(M,{style:{"margin-top":"24px"},layout:"vertical",ref_key:"formRef",ref:S,model:_},{default:n(()=>[o(p,{name:"group_name",label:"分组名称",rules:[{required:!0,message:"请输入分组名称"}]},{default:n(()=>[o(P,{value:_.group_name,"onUpdate:value":x[0]||(x[0]=I=>_.group_name=I),placeholder:"请输入，最多10个字",maxLength:10},null,8,["value"])]),_:1}),o(p,{name:"group_desc",label:"分组描述"},{default:n(()=>[o(E,{style:{height:"80px"},maxLength:100,value:_.group_desc,"onUpdate:value":x[1]||(x[1]=I=>_.group_desc=I),placeholder:"请输入"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open","confirm-loading","title"])])}}},qt={class:"group-wrapper"},Bt={class:"group-box"},Jt=["onClick"],Ft={class:"group-name"},Wt={class:"name-text"},Qt={class:"hover-btn-box"},Xt=["onClick"],Zt=["onClick"],Yt={__name:"group-list",emits:["change","load"],setup(w,{emit:f}){const k=f,y=h(-1),_=h([]),$=()=>{xt().then(m=>{_.value=[{id:-1,group_name:"全部"},{id:0,group_name:"默认分组"},...m.data],k("load",_.value)})};$();const L=m=>{y.value=m.id,k("change",m)},s=h(null),S=m=>{s.value.show({...m})},D=m=>{F.confirm({title:"删除确认",icon:et(it),content:`确定要删除分组【${m.group_name}】吗？`,okText:"删除",okType:"danger",cancelText:"取消",onOk(){Ct({id:m.id}).then(b=>{m.id==y.value&&L(_.value[0]),$(),T.success("删除成功")})},onCancel(){}})};return(m,b)=>{const x=Y,P=ht,p=mt,E=_t,M=vt;return i(),d(A,null,[t("div",qt,[t("div",null,[o(x,{onClick:b[0]||(b[0]=v=>S({})),icon:et(g(nt)),block:""},{default:n(()=>b[2]||(b[2]=[U("添加分组")])),_:1,__:[2]},8,["icon"])]),t("div",Bt,[(i(!0),d(A,null,H(_.value,v=>(i(),d("div",{class:Ut(["group-list",{active:v.id==y.value}]),onClick:I=>L(v),key:v.id},[t("div",Ft,[t("div",Wt,l(v.group_name),1),v.group_desc?(i(),R(P,{key:0},{title:n(()=>[U(l(v.group_desc),1)]),default:n(()=>[o(g($t))]),_:2},1024)):G("",!0)]),v.id>0?(i(),d("div",{key:0,class:"right-block",onClick:b[1]||(b[1]=Pt(()=>{},["stop"]))},[o(M,null,{overlay:n(()=>[o(E,null,{default:n(()=>[o(p,null,{default:n(()=>[t("div",{onClick:I=>S(v)},"编 辑",8,Xt)]),_:2},1024),o(p,null,{default:n(()=>[t("div",{style:{color:"#fb363f"},onClick:I=>D(v)},"删 除",8,Zt)]),_:2},1024)]),_:2},1024)]),default:n(()=>[t("div",Qt,[o(g(ut))])]),_:2},1024)])):G("",!0)],10,Jt))),128))])]),o(Vt,{ref_key:"addGroupRef",ref:s,onOk:$},null,512)],64)}}},Kt=Z(Yt,[["__scopeId","data-v-2b90ce82"]]),te={class:"ai-create-box"},ee={class:"input-box"},oe={class:"input-box"},se={class:"quick-tags-box"},ne={class:"ai-list-box"},le={key:0,class:"loading-box"},re={key:0,class:"prompt-list-box"},ie={class:"prompt-list"},ae={class:"prompt-header"},pe={class:"prompt-title"},ce={class:"prompt-content"},de={class:"prompt-list"},ue={class:"prompt-header"},_e={class:"prompt-title"},me={class:"prompt-content"},ve={class:"prompt-list"},he={class:"prompt-header"},fe={class:"prompt-title"},be={class:"prompt-content"},ge={class:"prompt-list"},ke={class:"prompt-header"},ye={class:"prompt-title"},$e={class:"prompt-content"},xe={class:"prompt-list"},Ce={class:"prompt-header"},Se={class:"prompt-title"},je={class:"prompt-content"},Oe={class:"prompt-list"},Le={class:"prompt-header"},we={class:"prompt-title"},Ie={class:"prompt-content"},Ue={class:"prompt-header"},Pe={class:"prompt-title"},Me={class:"prompt-content"},Ae={key:1,class:"empty-box"},De={__name:"ai-create-prompt",emits:["handleAiSave"],setup(w,{expose:f,emit:k}){const y=tt.PRESENTED_IMAGE_SIMPLE,_=h(!1),$=h(!1);Mt().query;const L=k,s=h(""),S=h(!1),D=[{title:"创建一个电商行业售后客服"},{title:"创建一个英语教育机构官网售前机器人"}],m=h("在上方输入框输入要求，点击生成提示词"),b=()=>{x.value=!1,p.promptStruct=P,s.value="",m.value="在上方输入框输入要求，点击生成提示词",_.value=!0},x=h(!1),P={role:{subject:"",describe:""},task:{subject:"",describe:""},constraints:{subject:"",describe:""},skill:{subject:"",describe:""},output:{subject:"",describe:""},tone:{subject:"",describe:""},custom:[]},p=K({promptStruct:P,use_model:"",model_config_id:""}),E=u=>{s.value=u},M=()=>{if(!s.value)return T.error("请输入AI 生成提示词");if(S.value)return T.error("正在生成中...");S.value=!0,St({demand:s.value,use_model:p.use_model,model_config_id:p.model_config_id}).then(u=>{p.promptStruct=JSON.parse(u.data.promptStruct),x.value=!0}).finally(()=>{S.value=!1}).catch(u=>{x.value=!1,m.value=u.msg})},v=u=>{At(()=>{var e,a,j;p.model_config_id=(e=u[0])==null?void 0:e.model_config_id,p.use_model=(j=(a=u[0])==null?void 0:a.children[0])==null?void 0:j.name})},I=()=>{if(!x.value)return T.error("请先生成提示词");L("handleAiSave",p.promptStruct),_.value=!1};return f({show:b}),(u,e)=>{const a=Y,j=Dt,z=st,V=at,O=Nt,q=ft,B=tt,W=ot,Q=F;return i(),d("div",null,[o(Q,{open:_.value,"onUpdate:open":e[3]||(e[3]=C=>_.value=C),title:"AI 生成提示词",width:746},{footer:n(()=>[o(a,{type:"primary",loading:$.value,onClick:I},{default:n(()=>e[4]||(e[4]=[U("使用该提示")])),_:1,__:[4]},8,["loading"])]),default:n(()=>[t("div",te,[t("div",ee,[o(j,{modelType:"LLM",modeName:p.use_model,"onUpdate:modeName":e[0]||(e[0]=C=>p.use_model=C),modeId:p.model_config_id,"onUpdate:modeId":e[1]||(e[1]=C=>p.model_config_id=C),style:{width:"300px"},onLoaded:v},null,8,["modeName","modeId"])]),t("div",oe,[o(z,{style:{width:"100%"},value:s.value,"onUpdate:value":e[2]||(e[2]=C=>s.value=C),size:"large",onPressEnter:M,placeholder:"请输入AI 生成提示词例如：创建一个电商行业售后客服"},null,8,["value"]),t("div",{class:"btn-box",onClick:M},[o(V,{name:"ai-mark"}),e[5]||(e[5]=t("span",null,"生成",-1))])]),t("div",se,[e[6]||(e[6]=t("div",{class:"quick-label"},"快捷生成：",-1)),(i(),d(A,null,H(D,C=>o(O,{key:C.title,onClick:c=>E(C.title),color:"blue"},{default:n(()=>[U(l(C.title),1)]),_:2},1032,["onClick"])),64))]),t("div",ne,[o(W,{style:{height:"100%"}},{default:n(()=>[S.value?(i(),d("div",le,[o(q,{tip:"正在生成中..."})])):(i(),d(A,{key:1},[x.value?(i(),d("div",re,[t("div",ie,[t("div",ae,[t("div",pe,l(p.promptStruct.role.subject),1)]),t("div",ce,l(p.promptStruct.role.describe),1)]),t("div",de,[t("div",ue,[t("div",_e,l(p.promptStruct.task.subject),1)]),t("div",me,l(p.promptStruct.task.describe),1)]),t("div",ve,[t("div",he,[t("div",fe,l(p.promptStruct.constraints.subject),1)]),t("div",be,l(p.promptStruct.constraints.describe),1)]),t("div",ge,[t("div",ke,[t("div",ye,l(p.promptStruct.skill.subject),1)]),t("div",$e,l(p.promptStruct.skill.describe),1)]),t("div",xe,[t("div",Ce,[t("div",Se,l(p.promptStruct.output.subject),1)]),t("div",je,l(p.promptStruct.output.describe),1)]),t("div",Oe,[t("div",Le,[t("div",we,l(p.promptStruct.tone.subject),1)]),t("div",Ie,l(p.promptStruct.tone.describe),1)]),(i(!0),d(A,null,H(p.promptStruct.custom,(C,c)=>(i(),d("div",{class:"prompt-list",key:c+C.key?C.key:""},[t("div",Ue,[t("div",Pe,l(C.subject),1)]),t("div",Me,l(C.describe),1)]))),128))])):(i(),d("div",Ae,[o(B,{image:g(y),description:m.value},null,8,["image","description"])]))],64))]),_:1})])])]),_:1},8,["open"])])}}},Ne=Z(De,[["__scopeId","data-v-d3b8ea6d"]]),Ee={key:1,class:"prompt-list-box"},Ge={class:"header-box"},Te={class:"prompt-list"},He={class:"prompt-header"},Re={class:"prompt-title"},ze={class:"prompt-content"},Ve={class:"prompt-list"},qe={class:"prompt-header"},Be={class:"prompt-title"},Je={class:"prompt-content"},Fe={class:"prompt-list"},We={class:"prompt-header"},Qe={class:"prompt-title"},Xe={class:"prompt-content"},Ze={class:"prompt-list"},Ye={class:"prompt-header"},Ke={class:"prompt-title"},to={class:"prompt-content"},eo={class:"prompt-list"},oo={class:"prompt-header"},so={class:"prompt-title"},no={class:"prompt-content"},lo={class:"prompt-list"},ro={class:"prompt-header"},io={class:"prompt-title"},ao={class:"prompt-content"},po={class:"prompt-header"},co={class:"prompt-title",style:{flex:"1"}},uo={class:"btn-wrapper-box"},_o=["onClick"],mo={class:"prompt-content"},vo={class:"add-theme-block"},ho={__name:"add-diy-prompt",props:{groupList:{type:Array,default:()=>[]}},emits:["ok"],setup(w,{expose:f,emit:k}){const y=k,_=w;let $={role:"请输入，告知大模型要扮演的身份、职责、沟通风格等，比如“你扮演一名经验丰富的电商行业售后客服AI助手，具备良好的沟通能力和解决问题的能力。”",task:"请输入，比如“根据提供的知识库资料，找到对应的售后知识（每个知识点之间使用⧼-split_line-⧽进行分割），快速准确回答用户的问题。”",constraints:"请输入对大模型在回复时的要求，比如“你的回答应该使用自然的对话方式，简单直接地回答，不要解释你的答案；当用户问题没有找到相关知识点时，直接告诉用户问题暂时无法回答，不能胡编乱造，否则你将受到惩罚。”",output:"请输入对大模型输出格式的要求，比如“请使用markdown格式输出”",tone:"请告知语言风格要求，比如“专业而不失亲切，适当使用emoji增强可读性”",skill:"请输入"},L={role:{subject:"角色",describe:""},task:{subject:"任务",describe:""},constraints:{subject:"要求",describe:""},skill:{subject:"技能",describe:""},output:{subject:"输出格式",describe:""},tone:{subject:"风格语气",describe:""},custom:[]};const s=K({id:"",title:"",group_id:0,prompt_type:0,prompt:"",prompt_struct:JSON.parse(JSON.stringify(L))}),S=h(!1),D=h(""),m=h(!1),b=h(null),x=(u={},e)=>{b.value&&b.value.resetFields(),s.title=u.title||"",s.group_id=u.group_id>0?u.group_id:0,s.id=e=="copy"?"":u.id||"",s.prompt_type=u.prompt_type,s.prompt=u.prompt||"",s.prompt_struct=u.prompt_struct||JSON.parse(JSON.stringify(L)),D.value=`${u.id?"编辑":"新建"}${u.prompt_type==0?"自定义":"结构化"}提示词`,m.value=!0},P=()=>{b.value.validate().then(()=>{let u={...s};s.prompt_type==0?delete u.prompt_struct:u.prompt_struct=JSON.stringify(s.prompt_struct),Ot({...u}).then(()=>{y("ok"),T.success(`${D.value}成功`),m.value=!1})})},p=h(null),E=()=>{p.value.show()},M=u=>{s.prompt_struct=u},v=()=>{s.prompt_struct.custom.push({subject:"",describe:"",key:Math.random()*1e4})},I=u=>{s.prompt_struct.custom.splice(u,1)};return f({show:x}),(u,e)=>{const a=st,j=ct,z=gt,V=bt,O=dt,q=at,B=Y,W=pt,Q=ot,C=F;return i(),d("div",null,[o(C,{open:m.value,"onUpdate:open":e[9]||(e[9]=c=>m.value=c),"confirm-loading":S.value,title:D.value,width:"766px",onOk:P},{default:n(()=>[o(Q,{style:{"max-height":"600px","margin-top":"24px"}},{default:n(()=>[o(W,{"label-col":{span:3},"wrapper-col":{span:21},ref_key:"formRef",ref:b,model:s},{default:n(()=>[o(j,{name:"title",label:"提示词标题",rules:[{required:!0,message:"请输入提示词标题"}]},{default:n(()=>[o(a,{value:s.title,"onUpdate:value":e[0]||(e[0]=c=>s.title=c),placeholder:"请输入提示词标题",maxLength:10},null,8,["value"])]),_:1}),o(j,{name:"group_id",label:"分组"},{default:n(()=>[o(V,{value:s.group_id,"onUpdate:value":e[1]||(e[1]=c=>s.group_id=c),style:{width:"100%"}},{default:n(()=>[(i(!0),d(A,null,H(_.groupList,c=>(i(),R(z,{value:c.id},{default:n(()=>[U(l(c.group_name),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value"])]),_:1}),s.prompt_type==0?(i(),R(j,{key:0,name:"prompt",label:"提示词",rules:[{required:!0,message:"请输入提示词"}]},{default:n(()=>[o(O,{style:{height:"280px"},value:s.prompt,"onUpdate:value":e[2]||(e[2]=c=>s.prompt=c),placeholder:"请输入"},null,8,["value"])]),_:1})):(i(),d("div",Ee,[t("div",Ge,[e[11]||(e[11]=t("div",{class:"header-left"},"提示词",-1)),t("div",{class:"ai-mark-box",onClick:E},[o(q,{name:"ai-mark"}),e[10]||(e[10]=U(" AI自动生成 "))])]),t("div",Te,[t("div",He,[t("div",Re,l(s.prompt_struct.role.subject),1)]),t("div",ze,[o(O,{style:{height:"80px"},bordered:!1,value:s.prompt_struct.role.describe,"onUpdate:value":e[3]||(e[3]=c=>s.prompt_struct.role.describe=c),placeholder:g($).role},null,8,["value","placeholder"])])]),t("div",Ve,[t("div",qe,[t("div",Be,l(s.prompt_struct.task.subject),1)]),t("div",Je,[o(O,{style:{height:"80px"},bordered:!1,value:s.prompt_struct.task.describe,"onUpdate:value":e[4]||(e[4]=c=>s.prompt_struct.task.describe=c),placeholder:g($).task},null,8,["value","placeholder"])])]),t("div",Fe,[t("div",We,[t("div",Qe,l(s.prompt_struct.constraints.subject),1)]),t("div",Xe,[o(O,{style:{height:"80px"},bordered:!1,value:s.prompt_struct.constraints.describe,"onUpdate:value":e[5]||(e[5]=c=>s.prompt_struct.constraints.describe=c),placeholder:g($).constraints},null,8,["value","placeholder"])])]),t("div",Ze,[t("div",Ye,[t("div",Ke,l(s.prompt_struct.skill.subject),1)]),t("div",to,[o(O,{style:{height:"80px"},bordered:!1,value:s.prompt_struct.skill.describe,"onUpdate:value":e[6]||(e[6]=c=>s.prompt_struct.skill.describe=c),placeholder:g($).skill},null,8,["value","placeholder"])])]),t("div",eo,[t("div",oo,[t("div",so,l(s.prompt_struct.output.subject),1)]),t("div",no,[o(O,{style:{height:"80px"},bordered:!1,value:s.prompt_struct.output.describe,"onUpdate:value":e[7]||(e[7]=c=>s.prompt_struct.output.describe=c),placeholder:g($).output},null,8,["value","placeholder"])])]),t("div",lo,[t("div",ro,[t("div",io,l(s.prompt_struct.tone.subject),1)]),t("div",ao,[o(O,{style:{height:"80px"},bordered:!1,value:s.prompt_struct.tone.describe,"onUpdate:value":e[8]||(e[8]=c=>s.prompt_struct.tone.describe=c),placeholder:g($).tone},null,8,["value","placeholder"])])]),(i(!0),d(A,null,H(s.prompt_struct.custom,(c,X)=>(i(),d("div",{class:"prompt-list",key:X+c.key?c.key:""},[t("div",po,[t("div",co,[o(a,{bordered:!1,style:{width:"100%"},value:c.subject,"onUpdate:value":J=>c.subject=J,placeholder:"请输入主题"},null,8,["value","onUpdate:value"])]),t("div",uo,[t("div",{class:"hover-btn-box",onClick:J=>I(X)},[o(g(jt))],8,_o)])]),t("div",mo,[o(O,{style:{height:"80px"},bordered:!1,value:c.describe,"onUpdate:value":J=>c.describe=J,placeholder:"请输入"},null,8,["value","onUpdate:value"])])]))),128)),t("div",vo,[o(B,{onClick:v,block:"",icon:et(g(nt))},{default:n(()=>e[12]||(e[12]=[U("添加主题")])),_:1,__:[12]},8,["icon"])])]))]),_:1},8,["model"])]),_:1})]),_:1},8,["open","confirm-loading","title"]),o(Ne,{onHandleAiSave:M,ref_key:"aiCreatePromptRef",ref:p},null,512)])}}},fo=Z(ho,[["__scopeId","data-v-a5fa67e0"]]),bo={class:"user-model-page"},go={class:"page-title"},ko={class:"list-wrapper"},yo={class:"left-group"},$o={class:"right-cotnetn"},xo={class:"content-box"},Co={class:"btn-block"},So={key:0,class:"loading-box"},jo={class:"prompt-list-box"},Oo={class:"prompt-header"},Lo={class:"prompt-title"},wo={key:0,class:"prompt-type diy"},Io={key:1,class:"prompt-type"},Uo={class:"title"},Po={class:"right-btn-box"},Mo=["onClick"],Ao=["onClick"],Do={class:"hover-btn-box"},No=["onClick"],Eo=["onClick"],Go=["onClick"],To={class:"prompt-content-box"},Ho={key:0,class:"prompt-content"},Ro=["onClick"],zo={key:1,class:"structure-list-box"},Vo={class:"structure-list"},qo={class:"structure-title"},Bo={class:"structure-content"},Jo={class:"structure-list"},Fo={class:"structure-title"},Wo={class:"structure-content"},Qo=["onClick"],Xo={class:"structure-list"},Zo={class:"structure-title"},Yo={class:"structure-content"},Ko={class:"structure-list"},ts={class:"structure-title"},es={class:"structure-content"},os={class:"structure-list"},ss={class:"structure-title"},ns={class:"structure-content"},ls={class:"structure-list"},rs={class:"structure-title"},is={class:"structure-content"},as={class:"structure-title"},ps={class:"structure-content"},cs={class:"move-group-box"},ds={__name:"index",setup(w){let f=-1;const k=e=>{f=e.id,s()};let y=h([]);const _=e=>{y.value=e.filter(a=>a.id>=0)},$=h([]),L=h(!1),s=()=>{L.value=!0,Lt({group_id:f,page:1,size:9999}).then(e=>{let a=e.data.list||[];a=a.map(j=>({...j,isHide:!0,prompt_struct:j.prompt_struct?JSON.parse(j.prompt_struct):{}})),$.value=a}).finally(()=>{L.value=!1})};s();const S=h(null),D=e=>{S.value.show({group_id:f==-1?0:f,prompt_type:e})},m=(e,a)=>{S.value.show({...e},a)};function b(e){var a;return(a=y.value.filter(j=>j.id==e)[0])==null?void 0:a.group_name}const x=e=>{e.isHide=!e.isHide},P=h(!0),p=()=>{P.value=!P.value,$.value=$.value.map(e=>({...e,isHide:P.value}))},E=e=>{F.confirm({title:"删除确认",icon:o(it),content:`确定要删除提示词[${e.title}]吗？`,okText:"删除",okType:"danger",cancelText:"取消",onOk(){wt({id:e.id}).then(a=>{T.success("删除成功"),s()})},onCancel(){}})},M=h(!1);let v=K({id:"",group_id:0});const I=e=>{e={...e},v.id=e.id,v.group_id=e.group_id>0?e.group_id:0,M.value=!0},u=()=>{if(v.id<0)return T.error("请选择要移动的分组");It({id:v.id,group_id:v.group_id}).then(()=>{T.success("移动成功"),M.value=!1,s()})};return(e,a)=>{const j=Ht,z=ot,V=Y,O=mt,q=_t,B=vt,W=ft,Q=ht,C=tt,c=gt,X=bt,J=F;return i(),d("div",bo,[t("div",go,[a[4]||(a[4]=U(" 提示词模板库 ")),o(j,{type:"vertical"}),a[5]||(a[5]=t("div",{class:"desc"}," 添加提示词模板，在应用配置和工作流的AI对话节点，可以从提示词模板库选择提示词并应用 ",-1))]),t("div",ko,[t("div",yo,[o(z,null,{default:n(()=>[o(Kt,{onChange:k,onLoad:_})]),_:1})]),t("div",$o,[o(z,null,{default:n(()=>[t("div",xo,[t("div",Co,[o(B,null,{overlay:n(()=>[o(q,null,{default:n(()=>[o(O,null,{default:n(()=>[t("div",{onClick:a[0]||(a[0]=r=>D(1))},"添加结构化提示词")]),_:1}),o(O,null,{default:n(()=>[t("div",{onClick:a[1]||(a[1]=r=>D(0))},"添加自定义提示词")]),_:1})]),_:1})]),default:n(()=>[o(V,{type:"primary",icon:o(g(nt))},{default:n(()=>a[6]||(a[6]=[U("提示词")])),_:1,__:[6]},8,["icon"])]),_:1}),o(V,{onClick:p,icon:o(g(lt))},{default:n(()=>[U(l(P.value?"全部展开":"全部收起"),1)]),_:1},8,["icon"])]),L.value?(i(),d("div",So,[o(W)])):G("",!0),t("div",jo,[(i(!0),d(A,null,H($.value,r=>(i(),d("div",{class:"prompt-list",key:r.id},[t("div",Oo,[t("div",Lo,[r.prompt_type==0?(i(),d("div",wo,"自定义")):G("",!0),r.prompt_type==1?(i(),d("div",Io,"结构化")):G("",!0),t("div",Uo,l(r.title),1),o(j,{type:"vertical"}),t("div",null,l(b(r.group_id)),1)]),t("div",Po,[o(Q,{title:r.isHide?"展开":"收起"},{default:n(()=>[t("div",{class:"hover-btn-box",onClick:N=>x(r)},[r.isHide?(i(),R(g(Et),{key:0})):(i(),R(g(Gt),{key:1}))],8,Mo)]),_:2},1032,["title"]),t("div",{class:"hover-btn-box",onClick:N=>m(r)},[o(g(Tt))],8,Ao),o(B,null,{overlay:n(()=>[o(q,null,{default:n(()=>[o(O,null,{default:n(()=>[t("div",{onClick:N=>m(r,"copy")},"复制",8,No)]),_:2},1024),o(O,null,{default:n(()=>[t("div",{onClick:N=>I(r)},"修改分组",8,Eo)]),_:2},1024),o(O,null,{default:n(()=>[t("div",{onClick:N=>E(r)},"删除",8,Go)]),_:2},1024)]),_:2},1024)]),default:n(()=>[t("div",Do,[o(g(ut))])]),_:2},1024)])]),t("div",To,[r.prompt_type==0?(i(),d("div",Ho,[r.isHide?(i(),d(A,{key:0},[U(l(r.prompt.slice(0,200))+" ",1),r.prompt.length>200?(i(),d("span",{key:0,onClick:N=>x(r),style:{cursor:"pointer"}},"...",8,Ro)):G("",!0)],64)):(i(),d(A,{key:1},[U(l(r.prompt),1)],64))])):(i(),d("div",zo,[t("div",Vo,[t("div",qo,l(r.prompt_struct.role.subject),1),t("div",Bo,l(r.prompt_struct.role.describe),1)]),t("div",Jo,[t("div",Fo,l(r.prompt_struct.task.subject),1),t("div",Wo,[U(l(r.prompt_struct.task.describe)+" ",1),r.isHide?(i(),d("span",{key:0,onClick:N=>x(r),style:{cursor:"pointer"}},"...",8,Qo)):G("",!0)])]),r.isHide?G("",!0):(i(),d(A,{key:0},[t("div",Xo,[t("div",Zo,l(r.prompt_struct.constraints.subject),1),t("div",Yo,l(r.prompt_struct.constraints.describe),1)]),t("div",Ko,[t("div",ts,l(r.prompt_struct.skill.subject),1),t("div",es,l(r.prompt_struct.skill.describe),1)]),t("div",os,[t("div",ss,l(r.prompt_struct.output.subject),1),t("div",ns,l(r.prompt_struct.output.describe),1)]),t("div",ls,[t("div",rs,l(r.prompt_struct.tone.subject),1),t("div",is,l(r.prompt_struct.tone.describe),1)]),(i(!0),d(A,null,H(r.prompt_struct.custom,N=>(i(),d("div",{class:"structure-list",key:N.subject},[t("div",as,l(N.subject),1),t("div",ps,l(N.describe),1)]))),128))],64))]))])]))),128))])]),$.value.length==0?(i(),R(C,{key:0,style:{"padding-top":"100px"}})):G("",!0)]),_:1})])]),o(fo,{groupList:g(y),onOk:s,ref_key:"addDiyPromptRef",ref:S},null,8,["groupList"]),o(J,{open:M.value,"onUpdate:open":a[3]||(a[3]=r=>M.value=r),title:"修改分组",onOk:u},{default:n(()=>[t("div",cs,[a[7]||(a[7]=t("div",{class:"label-text"},"修改分组为",-1)),o(X,{value:g(v).group_id,"onUpdate:value":a[2]||(a[2]=r=>g(v).group_id=r),style:{width:"100%"}},{default:n(()=>[(i(!0),d(A,null,H(g(y),r=>(i(),R(c,{value:r.id},{default:n(()=>[U(l(r.group_name),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value"])])]),_:1},8,["open"])])}}},ln=Z(ds,[["__scopeId","data-v-89be7750"]]);export{ln as default};
