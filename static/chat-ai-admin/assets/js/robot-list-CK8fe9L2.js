import{b as j,l as G,aw as K,ax as Q,ay as Y,k as y,M as A,E as B,B as Z,d as q}from"../../index-CfxQ5aRu.js";import{e as m,b as P,a4 as z,x as H,M as b,N as C,k as s,S as n,W as t,Q as J,a7 as X,F as oo,$ as to,a0 as r,u as g,Y as eo,Z as $,a1 as so,a2 as no}from"./vue-chunks-BjMuQ6KD.js";import{g as ao,c as io,r as lo}from"./index-W8wCYhw3.js";import{A as ro}from"./add-robot-alert-CVZxx2BH.js";import{_ as co}from"./page-alert-D48cNvXY.js";import{L as po}from"./list-tabs-BsaLziwC.js";import"./index-CBvtIVuM.js";import{D as _o}from"./dropdown-DsYo-imx.js";import{_ as uo,M as mo}from"./index-Bx_z5H0C.js";import{P as bo}from"./PlusOutlined-xiVHYVI8.js";import{_ as vo}from"./index-D1MiuDW_.js";import"./axios-Cm0UX6qg.js";import"./qs-DjdPq-RR.js";import"./crypto-js-BemCeW_6.js";import"./dayjs-DK4rpucX.js";import"./index-d7geF-HW.js";import"./index-xqeVJHPz.js";import"./Trigger-Dy6Dc2CN.js";import"./ResizeObserver.es-B1PUzC5B.js";import"./isPlainObject-xAKL-sfk.js";import"./responsiveObserve-X1b6Czsg.js";import"./collapseMotion-BH6Vz7El.js";import"./QuestionCircleOutlined-Deh272L3.js";import"./FormItemContext-DQ1b1ToO.js";import"./index-DqFgAaLP.js";import"./Password-BCnVcrNJ.js";import"./Input-C5WaaE9Z.js";import"./index-D6-G2N0k.js";import"./inputProps-D7qr__m5.js";import"./DownloadOutlined-BrqGknZq.js";import"./CheckOutlined-BLsT0eZM.js";import"./robot-Buya70Kq.js";import"./index-DcUUFn-g.js";import"./Search-DozVr2pE.js";import"./SearchOutlined-B7dGgS_P.js";import"./TextArea-CN_AI7y7.js";import"./index-CXSrVsd0.js";import"./RightOutlined-BHf0iqSq.js";import"./move-BjmscfYf.js";import"./slide-BYYxYcj9.js";import"./colors-C9XVGyX_.js";import"./shallowequal-B6gQS78g.js";const v=p=>(so("data-v-d3cb8735"),p=p(),no(),p),fo={class:"robot-page"},ko=v(()=>t("h3",{class:"page-title"},"应用",-1)),ho=v(()=>t("div",null,[t("p",null," 1、应用包括两种类型：聊天机器人、工作流。聊天机器人适合新手用户，关联知识库后只需简单配置，即可创建一个基于私有知识库的问答机器人。工作流适合高级用户，利用系统预制节点自定义任务流程，适合解决复杂任务。 "),t("p",null,"2、发现模块也提供了丰富模版，可以根据需要选择适合模版快速创建应用。")],-1)),yo={class:"list-toolbar"},Co={class:"toolbar-box"},go={class:"toolbar-box"},$o={class:"create-action"},wo=["src"],xo=v(()=>t("span",null,"聊天机器人",-1)),To={class:"create-action"},Ro=["src"],Ao=v(()=>t("span",null,"工作流",-1)),Bo={class:"list-box"},Po=["onClick"],Lo={class:"list-item"},Io={class:"robot-info"},No=["src"],Oo={class:"robot-info-content"},So={class:"robot-name"},Do={class:"robot-type-tag"},Eo={class:"robot-desc"},Mo=["onClick"],Vo=["onClick"],Fo=["onClick"],Uo=["onClick"],Wo=["onClick"],jo={__name:"robot-list",setup(p){const w=m([{title:"全部 (0)",value:"2"},{title:"聊天机器人 (0)",value:"0"},{title:"工作流 (0)",value:"1"}]),L=G();let{role_permission:I}=L;const N=P(()=>I.includes("RobotCreate"));z();const _=m("2"),f=m([]),O=P(()=>_.value==2?f.value:f.value.filter(o=>o.application_type==_.value)),k=()=>{ao().then(o=>{let e=0,i=0,l=0;o.data.forEach(c=>{c.application_type==0?i++:l++,e++}),w.value=[{title:"全部 ("+e+")",value:"2"},{title:"聊天机器人 ("+i+")",value:"0"},{title:"工作流 ("+l+")",value:"1"}],f.value=o.data}).catch(()=>{})},x=m(null),T=o=>{x.value.open(o)},S=({id:o,robot_key:e,application_type:i})=>{i==0?window.open(`/#/robot/config/basic-config?id=${o}&robot_key=${e}`,"_blank","noopener"):window.open(`/#/robot/config/workflow?id=${o}&robot_key=${e}`,"_blank","noopener")},D=o=>{if(Y(o.id)!=4)return y.error("您没有删除机器人的权限");let i=3,l=A.confirm({title:`删除机器人${o.robot_name}`,icon:s(B),content:"您确定要删除此机器人吗？",okText:i+" 确 定",okType:"danger",cancelText:"取 消",okButtonProps:{disabled:!0},onOk(){E(o)},onCancel(){}}),c=setInterval(()=>{i==1?(l.update({okText:"确 定",okButtonProps:{disabled:!1}}),clearInterval(c),c=void 0):(i-=1,l.update({okText:i+" 确 定",okButtonProps:{disabled:!0}}))},1e3)},E=({id:o})=>{io({id:o}).then(()=>{y.success("删除成功"),k()})},M=o=>{let e=3,i=A.confirm({title:`复制机器人${o.robot_name}`,icon:s(B),content:"您确定要复制此机器人吗？",okText:e+" 确 定",okType:"danger",cancelText:"取 消",okButtonProps:{disabled:!0},onOk(){V(o)},onCancel(){}}),l=setInterval(()=>{e==1?(i.update({okText:"确 定",okButtonProps:{disabled:!1}}),clearInterval(l),l=void 0):(e-=1,i.update({okText:e+" 确 定",okButtonProps:{disabled:!0}}))},1e3)},V=({id:o})=>{lo({id:o}).then(()=>{y.success("复制成功"),k()})},F=o=>{window.open(`#/robot/test?robot_key=${o.robot_key}&id=${o.id}`)},U=o=>{window.open(`#/robot/config/session-record?robot_key=${o.robot_key}&id=${o.id}`)},W=o=>{window.open(`#/robot/config/statistical_analysis?robot_key=${o.robot_key}&id=${o.id}`)};return H(()=>{k()}),(o,e)=>{const i=Z,l=uo,c=mo,R=_o,u=q,h=vo;return b(),C("div",fo,[ko,s(co,{class:"mb-16",title:"使用说明"},{default:n(()=>[ho]),_:1}),t("div",yo,[t("div",Co,[s(po,{tabs:w.value,value:_.value,"onUpdate:value":e[0]||(e[0]=a=>_.value=a)},null,8,["tabs","value"])]),t("div",go,[N.value?(b(),J(R,{key:0},{overlay:n(()=>[s(c,null,{default:n(()=>[s(l,{onClick:e[2]||(e[2]=r(a=>T(0),["prevent"]))},{default:n(()=>[t("span",$o,[t("img",{class:"icon",src:g(K),alt:""},null,8,wo),xo])]),_:1}),s(l,{onClick:e[3]||(e[3]=r(a=>T(1),["prevent"]))},{default:n(()=>[t("span",To,[t("img",{class:"icon",src:g(Q),alt:""},null,8,Ro),Ao])]),_:1})]),_:1})]),default:n(()=>[s(i,{type:"primary",onClick:e[1]||(e[1]=r(()=>{},["prevent"]))},{icon:n(()=>[s(g(bo))]),default:n(()=>[eo(" 创建应用 ")]),_:1})]),_:1})):X("",!0)])]),t("div",Bo,[(b(!0),C(oo,null,to(O.value,a=>(b(),C("div",{class:"list-item-wrapper",key:a.id,onClick:d=>S(a)},[t("div",Lo,[t("div",Io,[t("img",{class:"robot-avatar",src:a.robot_avatar,alt:""},null,8,No),t("div",Oo,[t("div",So,$(a.robot_name),1),t("div",Do,$(a.application_type==0?"聊天机器人":"工作流"),1)])]),t("div",Eo,$(a.robot_intro),1),t("div",{class:"robot-action",onClick:e[5]||(e[5]=r(()=>{},["stop"]))},[s(h,{title:"聊天测试"},{default:n(()=>[t("div",{class:"robot-action-item",onClick:r(d=>F(a),["stop"])},[s(u,{class:"action-icon",name:"chat"})],8,Mo)]),_:2},1024),s(h,{title:"会话记录"},{default:n(()=>[t("div",{class:"robot-action-item",onClick:r(d=>U(a),["stop"])},[s(u,{class:"action-icon",name:"session"})],8,Vo)]),_:2},1024),s(h,{title:"统计分析"},{default:n(()=>[t("div",{class:"robot-action-item",onClick:r(d=>W(a),["stop"])},[s(u,{class:"action-icon",name:"analysis"})],8,Fo)]),_:2},1024),s(R,null,{overlay:n(()=>[s(c,null,{default:n(()=>[s(l,null,{default:n(()=>[t("a",{class:"delete-text-color",href:"javascript:;",onClick:d=>D(a)},"删 除",8,Uo)]),_:2},1024),s(l,null,{default:n(()=>[t("a",{class:"copy-text-color",href:"javascript:;",onClick:d=>M(a)},"复 制",8,Wo)]),_:2},1024)]),_:2},1024)]),default:n(()=>[t("div",{class:"robot-action-item",onClick:e[4]||(e[4]=r(()=>{},["stop"]))},[s(u,{class:"action-icon",name:"point-h"})])]),_:2},1024)])])],8,Po))),128))]),s(ro,{ref_key:"addRobotAlertRef",ref:x},null,512)])}}},It=j(jo,[["__scopeId","data-v-d3cb8735"]]);export{It as default};
